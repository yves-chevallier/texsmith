
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Yves Chevallier">
      
      
        <link rel="canonical" href="https://yves-chevallier.github.io/texsmith/0.0.1/api/core/">
      
      
        <link rel="prev" href="../cli/">
      
      
        <link rel="next" href="../custom-transformers/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Core - TeXSmith</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+3:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Source Sans 3";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/brand.css">
    
      <link rel="stylesheet" href="../../css/extra.css">
    
      <link rel="stylesheet" href="../../css/pills.css">
    
      <link rel="stylesheet" href="../../css/drawio-darkmode.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="brown" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#core" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="TeXSmith" class="md-header__button md-logo" aria-label="TeXSmith" data-md-component="logo">
      
  <img src="../../assets/ts-anvil.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            TeXSmith
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Core
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="brown" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="brown" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/yves-chevallier/texsmith" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    yves-chevallier/texsmith
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../guide/getting-started/" class="md-tabs__link">
          
  
  
    
  
  Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../syntax/" class="md-tabs__link">
          
  
  
    
  
  Syntax

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/" class="md-tabs__link">
          
  
  
    
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cli/" class="md-tabs__link">
          
  
  
    
  
  CLI

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  API

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../about/" class="md-tabs__link">
          
  
  
    
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="TeXSmith" class="md-nav__button md-logo" aria-label="TeXSmith" data-md-component="logo">
      
  <img src="../../assets/ts-anvil.svg" alt="logo">

    </a>
    TeXSmith
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/yves-chevallier/texsmith" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    yves-chevallier/texsmith
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/front-matter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    YAML Front Matter
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/metadata/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Metadata Conventions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TeXSmith Extensions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/fonts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fonts and scripts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guide/fragments/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Fragments
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Fragments
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/fragments/glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/fragments/geometry/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Geometry Fragment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/fragments/typesetting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Typesetting controls
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Features
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Features
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/features/headings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Headings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/features/bibliography/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bibliography
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/features/acronyms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Acronyms
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/features/listings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code listings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/features/tags/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tags
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_8" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guide/templates/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Templates
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_8" id="__nav_2_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Templates
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/templates/discovery/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Template Discovery
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/templates/fragments/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Template fragments
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/templates/mermaid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mermaid Configuration per Template
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/templates/partials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Partials &amp; Override Precedence
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/templates/template-cookbook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Template Cookbook
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_9" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../guide/plumbing/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Plumbing
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_9" id="__nav_2_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Plumbing
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/plumbing/pipeline/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    How does TeXSmith work?
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/plumbing/engines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TEX Engines
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/plumbing/latex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LATEX
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/plumbing/tex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TEX
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/mkdocs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MkDocs Integration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/tectonic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tectonic Engine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Troubleshooting LATEX Builds
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../syntax/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Syntax
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Syntax
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/abbr/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Abbreviations / Acronyms
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/admonitions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Admonitions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/captions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Captions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/code/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Code
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/deflists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Definition Lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/extra/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Custom Attributes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/formatting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Text Formatting
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/images/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Images
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/math/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Math Extension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/mermaid/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mermaid Diagrams
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Notes on TeXSmith Extensions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/progressbar/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Progress Bars
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/references/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    References
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/smartypants/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Smarty Pants
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/supported/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Supported Markdown Syntax
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/tables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tables
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../syntax/wikilinks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Wiki Links
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../examples/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Examples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/book/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Book
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/colorful/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Colorful Squares
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/cooking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cooking Recipes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/diagrams/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Diagrams
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/languages/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Languages
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/letters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Letters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/paper/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Paper
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/snippets/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Snippet Blocks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/texsmith/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TeXSmith
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../cli/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    CLI
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    CLI
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/bibliography/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bibliography
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/build/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Build
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/slots/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Managing Slots
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/templates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Templates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    API
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    API
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bibliography/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bibliography
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CLI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.config" class="md-nav__link">
    <span class="md-ellipsis">
      
        config
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.config.BookConfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        BookConfig
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BookConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.config.BookConfig.set_folder" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_folder
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.config.CommonConfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        CommonConfig
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.config.CoverConfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        CoverConfig
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.config.LaTeXConfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        LaTeXConfig
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LaTeXConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.config.LaTeXConfig.add_extra" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_extra
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.config.LaTeXConfig.propagate" class="md-nav__link">
    <span class="md-ellipsis">
      
        propagate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.context" class="md-nav__link">
    <span class="md-ellipsis">
      
        context
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.context.AssetRegistry" class="md-nav__link">
    <span class="md-ellipsis">
      
        AssetRegistry
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AssetRegistry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.AssetRegistry.get" class="md-nav__link">
    <span class="md-ellipsis">
      
        get
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.AssetRegistry.items" class="md-nav__link">
    <span class="md-ellipsis">
      
        items
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.AssetRegistry.latex_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        latex_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.AssetRegistry.lookup" class="md-nav__link">
    <span class="md-ellipsis">
      
        lookup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.AssetRegistry.register" class="md-nav__link">
    <span class="md-ellipsis">
      
        register
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState" class="md-nav__link">
    <span class="md-ellipsis">
      
        DocumentState
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DocumentState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.add_heading" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_heading
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.add_solution" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_solution
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.next_counter" class="md-nav__link">
    <span class="md-ellipsis">
      
        next_counter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.next_exercise" class="md-nav__link">
    <span class="md-ellipsis">
      
        next_exercise
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.peek_counter" class="md-nav__link">
    <span class="md-ellipsis">
      
        peek_counter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.record_citation" class="md-nav__link">
    <span class="md-ellipsis">
      
        record_citation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.register_snippet" class="md-nav__link">
    <span class="md-ellipsis">
      
        register_snippet
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.remember_abbreviation" class="md-nav__link">
    <span class="md-ellipsis">
      
        remember_abbreviation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.remember_acronym" class="md-nav__link">
    <span class="md-ellipsis">
      
        remember_acronym
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.remember_glossary" class="md-nav__link">
    <span class="md-ellipsis">
      
        remember_glossary
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.reset_counter" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset_counter
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.context.RenderContext" class="md-nav__link">
    <span class="md-ellipsis">
      
        RenderContext
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RenderContext">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.RenderContext.attach_runtime" class="md-nav__link">
    <span class="md-ellipsis">
      
        attach_runtime
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.RenderContext.enter_phase" class="md-nav__link">
    <span class="md-ellipsis">
      
        enter_phase
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.RenderContext.is_processed" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_processed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.RenderContext.mark_processed" class="md-nav__link">
    <span class="md-ellipsis">
      
        mark_processed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.RenderContext.should_skip_children" class="md-nav__link">
    <span class="md-ellipsis">
      
        should_skip_children
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.RenderContext.suppress_children" class="md-nav__link">
    <span class="md-ellipsis">
      
        suppress_children
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion_contexts" class="md-nav__link">
    <span class="md-ellipsis">
      
        conversion_contexts
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion_contexts.AssetMapping" class="md-nav__link">
    <span class="md-ellipsis">
      
        AssetMapping
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion_contexts.BinderContext" class="md-nav__link">
    <span class="md-ellipsis">
      
        BinderContext
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion_contexts.DocumentContext" class="md-nav__link">
    <span class="md-ellipsis">
      
        DocumentContext
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion_contexts.GenerationStrategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        GenerationStrategy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion_contexts.SegmentContext" class="md-nav__link">
    <span class="md-ellipsis">
      
        SegmentContext
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion" class="md-nav__link">
    <span class="md-ellipsis">
      
        conversion
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.BinderContext" class="md-nav__link">
    <span class="md-ellipsis">
      
        BinderContext
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.ConversionError" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConversionError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.ConversionResult" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConversionResult
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.DiagnosticEmitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        DiagnosticEmitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.DocumentContext" class="md-nav__link">
    <span class="md-ellipsis">
      
        DocumentContext
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.FragmentOverrideError" class="md-nav__link">
    <span class="md-ellipsis">
      
        FragmentOverrideError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.GenerationStrategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        GenerationStrategy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.InputKind" class="md-nav__link">
    <span class="md-ellipsis">
      
        InputKind
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.LoggingEmitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        LoggingEmitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.NullEmitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        NullEmitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.SegmentContext" class="md-nav__link">
    <span class="md-ellipsis">
      
        SegmentContext
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.TemplateBinding" class="md-nav__link">
    <span class="md-ellipsis">
      
        TemplateBinding
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TemplateBinding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.conversion.TemplateBinding.apply_formatter_overrides" class="md-nav__link">
    <span class="md-ellipsis">
      
        apply_formatter_overrides
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.conversion.TemplateBinding.slot_levels" class="md-nav__link">
    <span class="md-ellipsis">
      
        slot_levels
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.TemplateFragment" class="md-nav__link">
    <span class="md-ellipsis">
      
        TemplateFragment
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.TemplateRenderer" class="md-nav__link">
    <span class="md-ellipsis">
      
        TemplateRenderer
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.TemplateRendererResult" class="md-nav__link">
    <span class="md-ellipsis">
      
        TemplateRendererResult
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.TemplateRuntime" class="md-nav__link">
    <span class="md-ellipsis">
      
        TemplateRuntime
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.UnsupportedInputError" class="md-nav__link">
    <span class="md-ellipsis">
      
        UnsupportedInputError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.attempt_transformer_fallback" class="md-nav__link">
    <span class="md-ellipsis">
      
        attempt_transformer_fallback
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.build_binder_context" class="md-nav__link">
    <span class="md-ellipsis">
      
        build_binder_context
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.build_document_context" class="md-nav__link">
    <span class="md-ellipsis">
      
        build_document_context
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.build_template_overrides" class="md-nav__link">
    <span class="md-ellipsis">
      
        build_template_overrides
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.coerce_slot_selector" class="md-nav__link">
    <span class="md-ellipsis">
      
        coerce_slot_selector
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.convert_document" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_document
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.copy_document_state" class="md-nav__link">
    <span class="md-ellipsis">
      
        copy_document_state
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.debug_enabled" class="md-nav__link">
    <span class="md-ellipsis">
      
        debug_enabled
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.ensure_emitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        ensure_emitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.ensure_fallback_converters" class="md-nav__link">
    <span class="md-ellipsis">
      
        ensure_fallback_converters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.extract_content" class="md-nav__link">
    <span class="md-ellipsis">
      
        extract_content
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.extract_front_matter_bibliography" class="md-nav__link">
    <span class="md-ellipsis">
      
        extract_front_matter_bibliography
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.extract_front_matter_slots" class="md-nav__link">
    <span class="md-ellipsis">
      
        extract_front_matter_slots
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.extract_slot_fragments" class="md-nav__link">
    <span class="md-ellipsis">
      
        extract_slot_fragments
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.format_rendering_error" class="md-nav__link">
    <span class="md-ellipsis">
      
        format_rendering_error
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.heading_level_for" class="md-nav__link">
    <span class="md-ellipsis">
      
        heading_level_for
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.load_template_runtime" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_template_runtime
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.parse_slot_mapping" class="md-nav__link">
    <span class="md-ellipsis">
      
        parse_slot_mapping
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.persist_debug_artifacts" class="md-nav__link">
    <span class="md-ellipsis">
      
        persist_debug_artifacts
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.raise_conversion_error" class="md-nav__link">
    <span class="md-ellipsis">
      
        raise_conversion_error
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.record_event" class="md-nav__link">
    <span class="md-ellipsis">
      
        record_event
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.render_with_fallback" class="md-nav__link">
    <span class="md-ellipsis">
      
        render_with_fallback
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.resolve_template_language" class="md-nav__link">
    <span class="md-ellipsis">
      
        resolve_template_language
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diagnostics-emitters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagnostics emitters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.diagnostics" class="md-nav__link">
    <span class="md-ellipsis">
      
        diagnostics
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.diagnostics.DiagnosticEmitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        DiagnosticEmitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.diagnostics.LoggingEmitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        LoggingEmitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.diagnostics.NullEmitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        NullEmitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.diagnostics.format_event_message" class="md-nav__link">
    <span class="md-ellipsis">
      
        format_event_message
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      
        exceptions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.exceptions.AssetMissingError" class="md-nav__link">
    <span class="md-ellipsis">
      
        AssetMissingError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.exceptions.InvalidNodeError" class="md-nav__link">
    <span class="md-ellipsis">
      
        InvalidNodeError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.exceptions.LatexRenderingError" class="md-nav__link">
    <span class="md-ellipsis">
      
        LatexRenderingError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.exceptions.TransformerExecutionError" class="md-nav__link">
    <span class="md-ellipsis">
      
        TransformerExecutionError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.exceptions.exception_hint" class="md-nav__link">
    <span class="md-ellipsis">
      
        exception_hint
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.exceptions.exception_messages" class="md-nav__link">
    <span class="md-ellipsis">
      
        exception_messages
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        rules
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderEngine" class="md-nav__link">
    <span class="md-ellipsis">
      
        RenderEngine
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RenderEngine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderEngine.collect_from" class="md-nav__link">
    <span class="md-ellipsis">
      
        collect_from
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderEngine.register" class="md-nav__link">
    <span class="md-ellipsis">
      
        register
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderEngine.run" class="md-nav__link">
    <span class="md-ellipsis">
      
        run
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderPhase" class="md-nav__link">
    <span class="md-ellipsis">
      
        RenderPhase
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RenderPhase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderPhase.BLOCK" class="md-nav__link">
    <span class="md-ellipsis">
      
        BLOCK
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderPhase.INLINE" class="md-nav__link">
    <span class="md-ellipsis">
      
        INLINE
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderPhase.POST" class="md-nav__link">
    <span class="md-ellipsis">
      
        POST
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderPhase.PRE" class="md-nav__link">
    <span class="md-ellipsis">
      
        PRE
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderRegistry" class="md-nav__link">
    <span class="md-ellipsis">
      
        RenderRegistry
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RenderRegistry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderRegistry.describe" class="md-nav__link">
    <span class="md-ellipsis">
      
        describe
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderRegistry.iter_phase" class="md-nav__link">
    <span class="md-ellipsis">
      
        iter_phase
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderRegistry.register" class="md-nav__link">
    <span class="md-ellipsis">
      
        register
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderRegistry.rules_for_phase" class="md-nav__link">
    <span class="md-ellipsis">
      
        rules_for_phase
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        RenderRule
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RenderRule">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderRule.applies_to_document" class="md-nav__link">
    <span class="md-ellipsis">
      
        applies_to_document
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules.RuleDefinition" class="md-nav__link">
    <span class="md-ellipsis">
      
        RuleDefinition
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RuleDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RuleDefinition.bind" class="md-nav__link">
    <span class="md-ellipsis">
      
        bind
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules.RuleFactory" class="md-nav__link">
    <span class="md-ellipsis">
      
        RuleFactory
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RuleFactory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RuleFactory.bind" class="md-nav__link">
    <span class="md-ellipsis">
      
        bind
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules.renders" class="md-nav__link">
    <span class="md-ellipsis">
      
        renders
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.latex.utils" class="md-nav__link">
    <span class="md-ellipsis">
      
        utils
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.latex.utils.escape_latex_chars" class="md-nav__link">
    <span class="md-ellipsis">
      
        escape_latex_chars
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.docker" class="md-nav__link">
    <span class="md-ellipsis">
      
        docker
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.DockerLimits" class="md-nav__link">
    <span class="md-ellipsis">
      
        DockerLimits
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.DockerRunRequest" class="md-nav__link">
    <span class="md-ellipsis">
      
        DockerRunRequest
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.DockerRunner" class="md-nav__link">
    <span class="md-ellipsis">
      
        DockerRunner
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DockerRunner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.DockerRunner.is_available" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_available
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.DockerRunner.reset" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.DockerRunner.run" class="md-nav__link">
    <span class="md-ellipsis">
      
        run
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.VolumeMount" class="md-nav__link">
    <span class="md-ellipsis">
      
        VolumeMount
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.is_docker_available" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_docker_available
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.run_container" class="md-nav__link">
    <span class="md-ellipsis">
      
        run_container
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../custom-transformers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Custom Transformers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../handlers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Handlers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../high-level/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    High-Level Workflows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../latex/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    LATEX
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../markdown/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Markdown Conversion
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Plugin API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../transformers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Transformers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../about/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    About
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    About
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/author/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Author
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/contribute/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Contribute
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/other-resources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Other Resources
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/license/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    License
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/versioning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Versioning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7_7" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../about/devel/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7_7" id="__nav_7_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/devel/config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Global user's configuraiton
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/devel/glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Glossary
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/devel/plugins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Standalone Plugins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/devel/tables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tables
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/release-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Release Notes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.config" class="md-nav__link">
    <span class="md-ellipsis">
      
        config
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.config.BookConfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        BookConfig
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BookConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.config.BookConfig.set_folder" class="md-nav__link">
    <span class="md-ellipsis">
      
        set_folder
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.config.CommonConfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        CommonConfig
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.config.CoverConfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        CoverConfig
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.config.LaTeXConfig" class="md-nav__link">
    <span class="md-ellipsis">
      
        LaTeXConfig
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LaTeXConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.config.LaTeXConfig.add_extra" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_extra
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.config.LaTeXConfig.propagate" class="md-nav__link">
    <span class="md-ellipsis">
      
        propagate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.context" class="md-nav__link">
    <span class="md-ellipsis">
      
        context
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.context.AssetRegistry" class="md-nav__link">
    <span class="md-ellipsis">
      
        AssetRegistry
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="AssetRegistry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.AssetRegistry.get" class="md-nav__link">
    <span class="md-ellipsis">
      
        get
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.AssetRegistry.items" class="md-nav__link">
    <span class="md-ellipsis">
      
        items
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.AssetRegistry.latex_path" class="md-nav__link">
    <span class="md-ellipsis">
      
        latex_path
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.AssetRegistry.lookup" class="md-nav__link">
    <span class="md-ellipsis">
      
        lookup
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.AssetRegistry.register" class="md-nav__link">
    <span class="md-ellipsis">
      
        register
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState" class="md-nav__link">
    <span class="md-ellipsis">
      
        DocumentState
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DocumentState">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.add_heading" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_heading
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.add_solution" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_solution
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.next_counter" class="md-nav__link">
    <span class="md-ellipsis">
      
        next_counter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.next_exercise" class="md-nav__link">
    <span class="md-ellipsis">
      
        next_exercise
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.peek_counter" class="md-nav__link">
    <span class="md-ellipsis">
      
        peek_counter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.record_citation" class="md-nav__link">
    <span class="md-ellipsis">
      
        record_citation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.register_snippet" class="md-nav__link">
    <span class="md-ellipsis">
      
        register_snippet
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.remember_abbreviation" class="md-nav__link">
    <span class="md-ellipsis">
      
        remember_abbreviation
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.remember_acronym" class="md-nav__link">
    <span class="md-ellipsis">
      
        remember_acronym
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.remember_glossary" class="md-nav__link">
    <span class="md-ellipsis">
      
        remember_glossary
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.DocumentState.reset_counter" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset_counter
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.context.RenderContext" class="md-nav__link">
    <span class="md-ellipsis">
      
        RenderContext
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RenderContext">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.RenderContext.attach_runtime" class="md-nav__link">
    <span class="md-ellipsis">
      
        attach_runtime
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.RenderContext.enter_phase" class="md-nav__link">
    <span class="md-ellipsis">
      
        enter_phase
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.RenderContext.is_processed" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_processed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.RenderContext.mark_processed" class="md-nav__link">
    <span class="md-ellipsis">
      
        mark_processed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.RenderContext.should_skip_children" class="md-nav__link">
    <span class="md-ellipsis">
      
        should_skip_children
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.context.RenderContext.suppress_children" class="md-nav__link">
    <span class="md-ellipsis">
      
        suppress_children
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion_contexts" class="md-nav__link">
    <span class="md-ellipsis">
      
        conversion_contexts
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion_contexts.AssetMapping" class="md-nav__link">
    <span class="md-ellipsis">
      
        AssetMapping
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion_contexts.BinderContext" class="md-nav__link">
    <span class="md-ellipsis">
      
        BinderContext
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion_contexts.DocumentContext" class="md-nav__link">
    <span class="md-ellipsis">
      
        DocumentContext
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion_contexts.GenerationStrategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        GenerationStrategy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion_contexts.SegmentContext" class="md-nav__link">
    <span class="md-ellipsis">
      
        SegmentContext
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion" class="md-nav__link">
    <span class="md-ellipsis">
      
        conversion
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.BinderContext" class="md-nav__link">
    <span class="md-ellipsis">
      
        BinderContext
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.ConversionError" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConversionError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.ConversionResult" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConversionResult
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.DiagnosticEmitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        DiagnosticEmitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.DocumentContext" class="md-nav__link">
    <span class="md-ellipsis">
      
        DocumentContext
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.FragmentOverrideError" class="md-nav__link">
    <span class="md-ellipsis">
      
        FragmentOverrideError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.GenerationStrategy" class="md-nav__link">
    <span class="md-ellipsis">
      
        GenerationStrategy
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.InputKind" class="md-nav__link">
    <span class="md-ellipsis">
      
        InputKind
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.LoggingEmitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        LoggingEmitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.NullEmitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        NullEmitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.SegmentContext" class="md-nav__link">
    <span class="md-ellipsis">
      
        SegmentContext
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.TemplateBinding" class="md-nav__link">
    <span class="md-ellipsis">
      
        TemplateBinding
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TemplateBinding">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.conversion.TemplateBinding.apply_formatter_overrides" class="md-nav__link">
    <span class="md-ellipsis">
      
        apply_formatter_overrides
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.conversion.TemplateBinding.slot_levels" class="md-nav__link">
    <span class="md-ellipsis">
      
        slot_levels
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.TemplateFragment" class="md-nav__link">
    <span class="md-ellipsis">
      
        TemplateFragment
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.TemplateRenderer" class="md-nav__link">
    <span class="md-ellipsis">
      
        TemplateRenderer
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.TemplateRendererResult" class="md-nav__link">
    <span class="md-ellipsis">
      
        TemplateRendererResult
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.TemplateRuntime" class="md-nav__link">
    <span class="md-ellipsis">
      
        TemplateRuntime
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.UnsupportedInputError" class="md-nav__link">
    <span class="md-ellipsis">
      
        UnsupportedInputError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.attempt_transformer_fallback" class="md-nav__link">
    <span class="md-ellipsis">
      
        attempt_transformer_fallback
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.build_binder_context" class="md-nav__link">
    <span class="md-ellipsis">
      
        build_binder_context
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.build_document_context" class="md-nav__link">
    <span class="md-ellipsis">
      
        build_document_context
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.build_template_overrides" class="md-nav__link">
    <span class="md-ellipsis">
      
        build_template_overrides
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.coerce_slot_selector" class="md-nav__link">
    <span class="md-ellipsis">
      
        coerce_slot_selector
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.convert_document" class="md-nav__link">
    <span class="md-ellipsis">
      
        convert_document
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.copy_document_state" class="md-nav__link">
    <span class="md-ellipsis">
      
        copy_document_state
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.debug_enabled" class="md-nav__link">
    <span class="md-ellipsis">
      
        debug_enabled
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.ensure_emitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        ensure_emitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.ensure_fallback_converters" class="md-nav__link">
    <span class="md-ellipsis">
      
        ensure_fallback_converters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.extract_content" class="md-nav__link">
    <span class="md-ellipsis">
      
        extract_content
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.extract_front_matter_bibliography" class="md-nav__link">
    <span class="md-ellipsis">
      
        extract_front_matter_bibliography
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.extract_front_matter_slots" class="md-nav__link">
    <span class="md-ellipsis">
      
        extract_front_matter_slots
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.extract_slot_fragments" class="md-nav__link">
    <span class="md-ellipsis">
      
        extract_slot_fragments
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.format_rendering_error" class="md-nav__link">
    <span class="md-ellipsis">
      
        format_rendering_error
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.heading_level_for" class="md-nav__link">
    <span class="md-ellipsis">
      
        heading_level_for
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.load_template_runtime" class="md-nav__link">
    <span class="md-ellipsis">
      
        load_template_runtime
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.parse_slot_mapping" class="md-nav__link">
    <span class="md-ellipsis">
      
        parse_slot_mapping
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.persist_debug_artifacts" class="md-nav__link">
    <span class="md-ellipsis">
      
        persist_debug_artifacts
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.raise_conversion_error" class="md-nav__link">
    <span class="md-ellipsis">
      
        raise_conversion_error
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.record_event" class="md-nav__link">
    <span class="md-ellipsis">
      
        record_event
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.render_with_fallback" class="md-nav__link">
    <span class="md-ellipsis">
      
        render_with_fallback
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.conversion.resolve_template_language" class="md-nav__link">
    <span class="md-ellipsis">
      
        resolve_template_language
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diagnostics-emitters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Diagnostics emitters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.diagnostics" class="md-nav__link">
    <span class="md-ellipsis">
      
        diagnostics
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.diagnostics.DiagnosticEmitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        DiagnosticEmitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.diagnostics.LoggingEmitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        LoggingEmitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.diagnostics.NullEmitter" class="md-nav__link">
    <span class="md-ellipsis">
      
        NullEmitter
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.diagnostics.format_event_message" class="md-nav__link">
    <span class="md-ellipsis">
      
        format_event_message
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      
        exceptions
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.exceptions.AssetMissingError" class="md-nav__link">
    <span class="md-ellipsis">
      
        AssetMissingError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.exceptions.InvalidNodeError" class="md-nav__link">
    <span class="md-ellipsis">
      
        InvalidNodeError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.exceptions.LatexRenderingError" class="md-nav__link">
    <span class="md-ellipsis">
      
        LatexRenderingError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.exceptions.TransformerExecutionError" class="md-nav__link">
    <span class="md-ellipsis">
      
        TransformerExecutionError
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.exceptions.exception_hint" class="md-nav__link">
    <span class="md-ellipsis">
      
        exception_hint
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.exceptions.exception_messages" class="md-nav__link">
    <span class="md-ellipsis">
      
        exception_messages
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        rules
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderEngine" class="md-nav__link">
    <span class="md-ellipsis">
      
        RenderEngine
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RenderEngine">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderEngine.collect_from" class="md-nav__link">
    <span class="md-ellipsis">
      
        collect_from
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderEngine.register" class="md-nav__link">
    <span class="md-ellipsis">
      
        register
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderEngine.run" class="md-nav__link">
    <span class="md-ellipsis">
      
        run
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderPhase" class="md-nav__link">
    <span class="md-ellipsis">
      
        RenderPhase
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RenderPhase">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderPhase.BLOCK" class="md-nav__link">
    <span class="md-ellipsis">
      
        BLOCK
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderPhase.INLINE" class="md-nav__link">
    <span class="md-ellipsis">
      
        INLINE
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderPhase.POST" class="md-nav__link">
    <span class="md-ellipsis">
      
        POST
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderPhase.PRE" class="md-nav__link">
    <span class="md-ellipsis">
      
        PRE
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderRegistry" class="md-nav__link">
    <span class="md-ellipsis">
      
        RenderRegistry
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RenderRegistry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderRegistry.describe" class="md-nav__link">
    <span class="md-ellipsis">
      
        describe
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderRegistry.iter_phase" class="md-nav__link">
    <span class="md-ellipsis">
      
        iter_phase
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderRegistry.register" class="md-nav__link">
    <span class="md-ellipsis">
      
        register
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderRegistry.rules_for_phase" class="md-nav__link">
    <span class="md-ellipsis">
      
        rules_for_phase
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderRule" class="md-nav__link">
    <span class="md-ellipsis">
      
        RenderRule
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RenderRule">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RenderRule.applies_to_document" class="md-nav__link">
    <span class="md-ellipsis">
      
        applies_to_document
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules.RuleDefinition" class="md-nav__link">
    <span class="md-ellipsis">
      
        RuleDefinition
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RuleDefinition">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RuleDefinition.bind" class="md-nav__link">
    <span class="md-ellipsis">
      
        bind
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules.RuleFactory" class="md-nav__link">
    <span class="md-ellipsis">
      
        RuleFactory
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RuleFactory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.core.rules.RuleFactory.bind" class="md-nav__link">
    <span class="md-ellipsis">
      
        bind
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.core.rules.renders" class="md-nav__link">
    <span class="md-ellipsis">
      
        renders
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.latex.utils" class="md-nav__link">
    <span class="md-ellipsis">
      
        utils
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.latex.utils.escape_latex_chars" class="md-nav__link">
    <span class="md-ellipsis">
      
        escape_latex_chars
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.docker" class="md-nav__link">
    <span class="md-ellipsis">
      
        docker
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.DockerLimits" class="md-nav__link">
    <span class="md-ellipsis">
      
        DockerLimits
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.DockerRunRequest" class="md-nav__link">
    <span class="md-ellipsis">
      
        DockerRunRequest
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.DockerRunner" class="md-nav__link">
    <span class="md-ellipsis">
      
        DockerRunner
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DockerRunner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.DockerRunner.is_available" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_available
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.DockerRunner.reset" class="md-nav__link">
    <span class="md-ellipsis">
      
        reset
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.DockerRunner.run" class="md-nav__link">
    <span class="md-ellipsis">
      
        run
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.VolumeMount" class="md-nav__link">
    <span class="md-ellipsis">
      
        VolumeMount
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.is_docker_available" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_docker_available
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#texsmith.adapters.docker.run_container" class="md-nav__link">
    <span class="md-ellipsis">
      
        run_container
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


  <nav class="md-path" aria-label="Navigation" >
    <ol class="md-path__list">
      
        
  
  
    <li class="md-path__item">
      <a href="../.." class="md-path__link">
        
  <span class="md-ellipsis">
    Home
  </span>

      </a>
    </li>
  

      
      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../" class="md-path__link">
          
  <span class="md-ellipsis">
    API
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="core">Core<a class="headerlink" href="#core" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<a id="texsmith.core.config"></a>
    <div class="doc doc-contents first">

        <p>Configuration models used by the <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> renderer.</p>
<p>CommonConfig</p>
<dl>
<dt><code>build_dir</code> (<code>Path | None</code>)</dt>
<dd>Base directory for <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> artifacts. Provide an absolute or project-relative
  path to override the default export root that books inherit when they do not
  specify one.</dd>
<dt><code>save_html</code> (<code>bool</code>)</dt>
<dd>Persist the intermediate HTML render next to the PDF to aid troubleshooting
  before <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> compilation.</dd>
<dt><code>mermaid_config</code> (<code>Path | None</code>)</dt>
<dd>Path to a Mermaid configuration file. Point to a <code>.json</code> or <code>.mermaid</code>
  document to customise diagram rendering.</dd>
<dt><code>project_dir</code> (<code>Path | None</code>)</dt>
<dd>MkDocs project root used to resolve relative paths when copying additional
  assets.</dd>
<dd>BCP 47 language code forwarded to <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> for hyphenation, translations, and</dd>
<dd>metadata localisation.</dd>
<dt><code>legacy_latex_accents</code> (<code>bool</code>)</dt>
<dd>When <code>True</code>, escape accented characters, ligatures, and typographic punctuation
  using legacy <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> macros. When <code>False</code>, keep Unicode glyphs compatible with
  LuaLaTeX/XeLaTeX (default).</dd>
<dt><code>language</code> (<code>str | None</code>)</dt>
<dd>BCP 47 language code forwarded to <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> for hyphenation, translations, and
  metadata localisation.</dd>
</dl>
<p>CoverConfig</p>
<dl>
<dt><code>name</code> (<code>str</code>)</dt>
<dd>Identifier of the cover template to apply. The value must match a template
  declared in the cover bundle.</dd>
<dt><code>color</code> (<code>str | None</code>)</dt>
<dd>Primary colour override applied by the cover template.</dd>
<dt><code>logo</code> (<code>str | None</code>)</dt>
<dd>Project-relative path to a logo asset displayed on the cover.</dd>
</dl>
<p>BookConfig</p>
<dl>
<dt><code>root</code> (<code>str | None</code>)</dt>
<dd>Navigation entry treated as the starting point for the book. Use it when the
  root differs from the first MkDocs page.</dd>
<dt><code>title</code> (<code>str | None</code>)</dt>
<dd>Title displayed on the cover and in output metadata. Falls back to <code>site_name</code>
  when omitted.</dd>
<dt><code>subtitle</code> (<code>str | None</code>)</dt>
<dd>Optional subtitle appended to the cover and metadata.</dd>
<dt><code>author</code> (<code>str | None</code>)</dt>
<dd>Primary author string rendered in the book metadata.</dd>
<dt><code>year</code> (<code>int | None</code>)</dt>
<dd>Publication year to freeze in the output when <code>site_date</code> is not supplied.</dd>
<dt><code>email</code> (<code>str | None</code>)</dt>
<dd>Contact address printed in the credits.</dd>
<dt><code>folder</code> (<code>Path | None</code>)</dt>
<dd>Output directory for the rendered book. Defaults to a slug of the title when
  not provided.</dd>
<dt><code>frontmatter</code> (<code>list[str]</code>)</dt>
<dd>MkDocs page titles moved before the main matter.</dd>
<dt><code>backmatter</code> (<code>list[str]</code>)</dt>
<dd>MkDocs page titles grouped into the appendices.</dd>
<dt><code>base_level</code> (<code>int</code>)</dt>
<dd>Heading offset applied to align section numbering with the template
  expectations.</dd>
<dt><code>copy_files</code> (<code>dict[str, str]</code>)</dt>
<dd>Mapping of glob patterns to destination paths for copying additional assets
  alongside the book.</dd>
<dt><code>index_is_foreword</code> (<code>bool</code>)</dt>
<dd>Treat the <code>index</code> page as a foreword, typically removing numbering.</dd>
<dt><code>drop_title_index</code> (<code>bool</code>)</dt>
<dd>Suppress the <code>index</code> page heading when it acts as a foreword.</dd>
<dt><code>cover</code> (<code>CoverConfig</code>)</dt>
<dd>Nested configuration controlling the book cover.</dd>
</dl>
<p>LaTeXConfig</p>
<dl>
<dt><code>enabled</code> (<code>bool</code>)</dt>
<dd>Toggle <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> generation without discarding configuration.</dd>
<dt><code>books</code> (<code>list[BookConfig]</code>)</dt>
<dd>Collection of books to produce, inheriting defaults from <code>CommonConfig</code>.</dd>
<dt><code>clean_assets</code> (<code>bool</code>)</dt>
<dd>Remove stale assets from <code>build_dir</code> to avoid accumulating unused files.</dd>
</dl>










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="texsmith.core.config.BookConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">BookConfig</span>


<a href="#texsmith.core.config.BookConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommonConfig (texsmith.core.config.CommonConfig)" href="#texsmith.core.config.CommonConfig">CommonConfig</a></code></p>



        <p>Configuration for an individual book.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="texsmith.core.config.BookConfig.set_folder" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">set_folder</span>


<a href="#texsmith.core.config.BookConfig.set_folder" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_folder</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">BookConfig</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Populate the output folder from the book title when missing.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">set_folder</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BookConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Populate the output folder from the book title when missing.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">folder</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">folder</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">slugify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.config.CommonConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">CommonConfig</span>


<a href="#texsmith.core.config.CommonConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>



        <p>Common configuration propagated to each book.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.config.CoverConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">CoverConfig</span>


<a href="#texsmith.core.config.CoverConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>



        <p>Metadata used to render book covers.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.config.LaTeXConfig" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">LaTeXConfig</span>


<a href="#texsmith.core.config.LaTeXConfig" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="CommonConfig (texsmith.core.config.CommonConfig)" href="#texsmith.core.config.CommonConfig">CommonConfig</a></code></p>



        <p>Configuration for <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> taken from <code>mkdocs.yml</code>.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="texsmith.core.config.LaTeXConfig.add_extra" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">add_extra</span>


<a href="#texsmith.core.config.LaTeXConfig.add_extra" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_extra</span><span class="p">(</span><span class="o">**</span><span class="n">extra_data</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Allow consumers to attach additional attributes at runtime.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_extra</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">extra_data</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Allow consumers to attach additional attributes at runtime.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">extra_data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.config.LaTeXConfig.propagate" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">propagate</span>


<a href="#texsmith.core.config.LaTeXConfig.propagate" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">propagate</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">LaTeXConfig</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Propagate common values to nested book configurations.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;after&quot;</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">propagate</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LaTeXConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Propagate common values to nested book configurations.&quot;&quot;&quot;</span>
    <span class="n">to_propagate</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;build_dir&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mermaid_config&quot;</span><span class="p">,</span>
        <span class="s2">&quot;save_html&quot;</span><span class="p">,</span>
        <span class="s2">&quot;project_dir&quot;</span><span class="p">,</span>
        <span class="s2">&quot;language&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">book</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">books</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">to_propagate</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>
    <span class="k">return</span> <span class="bp">self</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="texsmith.core.context"></a>
    <div class="doc doc-contents first">

        <p>Rendering context primitives shared across the <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> pipeline.</p>










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="texsmith.core.context.AssetRegistry" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">AssetRegistry</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.context.AssetRegistry" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">AssetRegistry</span><span class="p">(</span>
    <span class="n">output_root</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">assets_map</span><span class="p">:</span> <span class="n">MutableMapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">copy_assets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Centralised registry for rendered assets.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.AssetRegistry.get" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get</span>


<a href="#texsmith.core.context.AssetRegistry.get" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Retrieve a previously registered artefact.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Retrieve a previously registered artefact.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assets_map</span><span class="p">[</span><span class="n">key</span><span class="p">])</span>
    <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">AssetMissingError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Missing asset &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.AssetRegistry.items" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">items</span>


<a href="#texsmith.core.context.AssetRegistry.items" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">items</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Iterate over registered assets yielding key/path pairs.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">items</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterate over registered assets yielding key/path pairs.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">((</span><span class="n">k</span><span class="p">,</span> <span class="n">Path</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">assets_map</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.AssetRegistry.latex_path" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">latex_path</span>


<a href="#texsmith.core.context.AssetRegistry.latex_path" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">latex_path</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return a <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span>-friendly path for an artefact.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">latex_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a LaTeX-friendly path for an artefact.&quot;&quot;&quot;</span>
    <span class="n">candidate</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">candidate</span><span class="o">.</span><span class="n">is_absolute</span><span class="p">():</span>
        <span class="k">return</span> <span class="n">candidate</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span>

    <span class="n">output_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_root</span><span class="o">.</span><span class="n">parent</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">reference</span> <span class="o">=</span> <span class="n">candidate</span><span class="o">.</span><span class="n">relative_to</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">reference</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">candidate</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">reference</span> <span class="o">=</span> <span class="n">candidate</span>

    <span class="k">return</span> <span class="n">reference</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.AssetRegistry.lookup" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">lookup</span>


<a href="#texsmith.core.context.AssetRegistry.lookup" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">lookup</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return a previously registered artefact when available.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">lookup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a previously registered artefact when available.&quot;&quot;&quot;</span>
    <span class="n">stored</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">assets_map</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Path</span><span class="p">(</span><span class="n">stored</span><span class="p">)</span> <span class="k">if</span> <span class="n">stored</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.AssetRegistry.register" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">register</span>


<a href="#texsmith.core.context.AssetRegistry.register" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">register</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">artefact</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Register a generated artefact and return its resolved path.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">artefact</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Path</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register a generated artefact and return its resolved path.&quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">artefact</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="o">.</span><span class="n">is_absolute</span><span class="p">():</span>
        <span class="n">path</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">output_root</span> <span class="o">/</span> <span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy_assets</span> <span class="k">else</span> <span class="n">Path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">assets_map</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">path</span>
    <span class="k">return</span> <span class="n">path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.context.DocumentState" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">DocumentState</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.context.DocumentState" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">DocumentState</span><span class="p">(</span>
    <span class="n">abbreviations</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">acronym_keys</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">acronyms</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">glossary</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">snippets</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">solutions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">headings</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">exercise_counter</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">has_index_entries</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">requires_shell_escape</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">counters</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">bibliography</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">citations</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">footnotes</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">index_entries</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">pygments_styles</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">script_usage</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">fallback_summary</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">callouts_used</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>In-memory state accumulated while rendering a document.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.DocumentState.add_heading" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">add_heading</span>


<a href="#texsmith.core.context.DocumentState.add_heading" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_heading</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">ref</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Track heading metadata to power table-of-contents generation.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_heading</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">ref</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Track heading metadata to power table-of-contents generation.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">headings</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;level&quot;</span><span class="p">:</span> <span class="n">level</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="n">text</span><span class="p">,</span> <span class="s2">&quot;ref&quot;</span><span class="p">:</span> <span class="n">ref</span><span class="p">})</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.DocumentState.add_solution" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">add_solution</span>


<a href="#texsmith.core.context.DocumentState.add_solution" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">add_solution</span><span class="p">(</span><span class="n">solution</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Append a solution block encountered during parsing.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">add_solution</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solution</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Append a solution block encountered during parsing.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">solutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">solution</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.DocumentState.next_counter" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">next_counter</span>


<a href="#texsmith.core.context.DocumentState.next_counter" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">next_counter</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Increment and return the named counter.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">next_counter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Increment and return the named counter.&quot;&quot;&quot;</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">counters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">counters</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.DocumentState.next_exercise" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">next_exercise</span>


<a href="#texsmith.core.context.DocumentState.next_exercise" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">next_exercise</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Increment and return the exercise counter.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">next_exercise</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Increment and return the exercise counter.&quot;&quot;&quot;</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_counter</span><span class="p">(</span><span class="s2">&quot;exercise&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">exercise_counter</span> <span class="o">=</span> <span class="n">counter</span>
    <span class="k">return</span> <span class="n">counter</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.DocumentState.peek_counter" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">peek_counter</span>


<a href="#texsmith.core.context.DocumentState.peek_counter" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">peek_counter</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;default&#39;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the current value of the named counter without modifying it.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">peek_counter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;default&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the current value of the named counter without modifying it.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">counters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.DocumentState.record_citation" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">record_citation</span>


<a href="#texsmith.core.context.DocumentState.record_citation" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">record_citation</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Track citation keys used throughout the document.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">record_citation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Track citation keys used throughout the document.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_citation_index</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_citation_index</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">citations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.DocumentState.register_snippet" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">register_snippet</span>


<a href="#texsmith.core.context.DocumentState.register_snippet" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">register_snippet</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">payload</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Cache snippet metadata to render later in the pipeline.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">register_snippet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">payload</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Cache snippet metadata to render later in the pipeline.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">snippets</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">payload</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.DocumentState.remember_abbreviation" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">remember_abbreviation</span>


<a href="#texsmith.core.context.DocumentState.remember_abbreviation" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">remember_abbreviation</span><span class="p">(</span><span class="n">term</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Track abbreviation definitions while ensuring consistency.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remember_abbreviation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">term</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Track abbreviation definitions while ensuring consistency.&quot;&quot;&quot;</span>
    <span class="n">normalised_term</span> <span class="o">=</span> <span class="n">term</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="n">normalised_description</span> <span class="o">=</span> <span class="n">description</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">normalised_term</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">normalised_description</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>

    <span class="n">existing_description</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">abbreviations</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">normalised_term</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">existing_description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">existing_description</span> <span class="o">!=</span> <span class="n">normalised_description</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Inconsistent acronym definition for &#39;</span><span class="si">{</span><span class="n">normalised_term</span><span class="si">}</span><span class="s2">&#39;: &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;&#39;</span><span class="si">{</span><span class="n">existing_description</span><span class="si">}</span><span class="s2">&#39; vs &#39;</span><span class="si">{</span><span class="n">normalised_description</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                <span class="p">),</span>
                <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">acronym_keys</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">normalised_term</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_acronym_key</span><span class="p">(</span><span class="n">normalised_term</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">abbreviations</span><span class="p">[</span><span class="n">normalised_term</span><span class="p">]</span> <span class="o">=</span> <span class="n">normalised_description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">acronym_keys</span><span class="p">[</span><span class="n">normalised_term</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">acronyms</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">normalised_term</span><span class="p">,</span> <span class="n">normalised_description</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">key</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.DocumentState.remember_acronym" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">remember_acronym</span>


<a href="#texsmith.core.context.DocumentState.remember_acronym" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">remember_acronym</span><span class="p">(</span><span class="n">term</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Register an acronym definition keyed by a normalised identifier.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remember_acronym</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">term</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">description</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register an acronym definition keyed by a normalised identifier.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">remember_abbreviation</span><span class="p">(</span><span class="n">term</span><span class="o">=</span><span class="n">term</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.DocumentState.remember_glossary" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">remember_glossary</span>


<a href="#texsmith.core.context.DocumentState.remember_glossary" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">remember_glossary</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">entry</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Record a glossary entry keyed by its identifier.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">remember_glossary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">entry</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Record a glossary entry keyed by its identifier.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">glossary</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.DocumentState.reset_counter" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">reset_counter</span>


<a href="#texsmith.core.context.DocumentState.reset_counter" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">reset_counter</span><span class="p">(</span><span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Clear the named counter if it has been tracked.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reset_counter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clear the named counter if it has been tracked.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">counters</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.context.RenderContext" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">RenderContext</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.context.RenderContext" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">RenderContext</span><span class="p">(</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">BookConfig</span><span class="p">,</span>
    <span class="n">formatter</span><span class="p">:</span> <span class="n">LaTeXFormatter</span><span class="p">,</span>
    <span class="n">document</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="n">assets</span><span class="p">:</span> <span class="n">AssetRegistry</span><span class="p">,</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">DocumentState</span> <span class="o">=</span> <span class="n">DocumentState</span><span class="p">(),</span>
    <span class="n">runtime</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Shared context passed to every handler during rendering.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.RenderContext.attach_runtime" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">attach_runtime</span>


<a href="#texsmith.core.context.RenderContext.attach_runtime" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">attach_runtime</span><span class="p">(</span><span class="o">**</span><span class="n">runtime</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Attach ad-hoc data visible to handlers for the running phase.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">attach_runtime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">runtime</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Attach ad-hoc data visible to handlers for the running phase.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_persistent_runtime</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">runtime</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">runtime</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.RenderContext.enter_phase" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">enter_phase</span>


<a href="#texsmith.core.context.RenderContext.enter_phase" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">enter_phase</span><span class="p">(</span><span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Mark the current phase and reset transient runtime data.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">enter_phase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Mark the current phase and reset transient runtime data.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">phase</span> <span class="o">=</span> <span class="n">phase</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">runtime</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_persistent_runtime</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_skip_children</span><span class="p">[</span><span class="n">phase</span><span class="o">.</span><span class="n">value</span><span class="p">]</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.RenderContext.is_processed" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">is_processed</span>


<a href="#texsmith.core.context.RenderContext.is_processed" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_processed</span><span class="p">(</span>
    <span class="n">node</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check whether a node has been processed in the given phase.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_processed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check whether a node has been processed in the given phase.&quot;&quot;&quot;</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">phase</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">phase</span>
    <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="nb">id</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_processed_nodes</span><span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.RenderContext.mark_processed" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">mark_processed</span>


<a href="#texsmith.core.context.RenderContext.mark_processed" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">mark_processed</span><span class="p">(</span>
    <span class="n">node</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Flag a node as already transformed for the selected phase.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">mark_processed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Flag a node as already transformed for the selected phase.&quot;&quot;&quot;</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">phase</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">phase</span>
    <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_processed_nodes</span><span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">value</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">node</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.RenderContext.should_skip_children" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">should_skip_children</span>


<a href="#texsmith.core.context.RenderContext.should_skip_children" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">should_skip_children</span><span class="p">(</span>
    <span class="n">node</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check whether children should be skipped during traversal.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">should_skip_children</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check whether children should be skipped during traversal.&quot;&quot;&quot;</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">phase</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">phase</span>
    <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="nb">id</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_skip_children</span><span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.context.RenderContext.suppress_children" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">suppress_children</span>


<a href="#texsmith.core.context.RenderContext.suppress_children" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">suppress_children</span><span class="p">(</span>
    <span class="n">node</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Prevent traversal of node children for the active phase.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/context.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">suppress_children</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Prevent traversal of node children for the active phase.&quot;&quot;&quot;</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">phase</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">phase</span>
    <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_skip_children</span><span class="p">[</span><span class="n">label</span><span class="o">.</span><span class="n">value</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">node</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="texsmith.core.conversion_contexts"></a>
    <div class="doc doc-contents first">

        <p>Context objects used during document conversion.</p>










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion_contexts.AssetMapping" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">AssetMapping</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.conversion_contexts.AssetMapping" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">AssetMapping</span><span class="p">(</span>
    <span class="n">source</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">kind</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Describe how a source asset should be persisted for <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> generation.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion_contexts.BinderContext" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">BinderContext</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.conversion_contexts.BinderContext" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">BinderContext</span><span class="p">(</span>
    <span class="n">output_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">BookConfig</span><span class="p">,</span>
    <span class="n">strategy</span><span class="p">:</span> <span class="n">GenerationStrategy</span><span class="p">,</span>
    <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">slot_requests</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">template_overrides</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">bibliography_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">bibliography_collection</span><span class="p">:</span> <span class="n">BibliographyCollection</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">template_binding</span><span class="p">:</span> <span class="n">TemplateBinding</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">documents</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">DocumentContext</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">bound_segments</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">SegmentContext</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Binder-level context describing template binding and global state.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion_contexts.DocumentContext" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">DocumentContext</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.conversion_contexts.DocumentContext" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">DocumentContext</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">source_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">base_level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">numbered</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">drop_title</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">title_from_heading</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">extracted_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">front_matter</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">slot_requests</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">slot_inclusions</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(),</span>
    <span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">bibliography</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">assets</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">AssetMapping</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">segments</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">SegmentContext</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Document-level context produced before rendering.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion_contexts.GenerationStrategy" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">GenerationStrategy</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.conversion_contexts.GenerationStrategy" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">GenerationStrategy</span><span class="p">(</span>
    <span class="n">copy_assets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">convert_assets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">hash_assets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">prefer_inputs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">persist_manifest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Rendering strategy toggles shared across conversion workflows.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion_contexts.SegmentContext" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">SegmentContext</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.conversion_contexts.SegmentContext" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">SegmentContext</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">base_level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">bibliography</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">assets</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">AssetMapping</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">destination</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Represent a fragment destined for insertion into a template slot.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="texsmith.core.conversion"></a>
    <div class="doc doc-contents first">

        <p>Public gateway into the low-level conversion engine.</p>










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.BinderContext" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">BinderContext</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.conversion.BinderContext" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">BinderContext</span><span class="p">(</span>
    <span class="n">output_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">BookConfig</span><span class="p">,</span>
    <span class="n">strategy</span><span class="p">:</span> <span class="n">GenerationStrategy</span><span class="p">,</span>
    <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">slot_requests</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">template_overrides</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">bibliography_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">bibliography_collection</span><span class="p">:</span> <span class="n">BibliographyCollection</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">template_binding</span><span class="p">:</span> <span class="n">TemplateBinding</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">documents</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">DocumentContext</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">bound_segments</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span>
        <span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">SegmentContext</span><span class="p">]</span>
    <span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Binder-level context describing template binding and global state.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.ConversionError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ConversionError</span>


<a href="#texsmith.core.conversion.ConversionError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>



        <p>Raised when a conversion fails and cannot recover.</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.ConversionResult" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">ConversionResult</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.conversion.ConversionResult" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">ConversionResult</span><span class="p">(</span>
    <span class="n">latex_output</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">tex_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">template_engine</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">template_shell_escape</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">language</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">has_bibliography</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">slot_outputs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">default_slot</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mainmatter&quot;</span><span class="p">,</span>
    <span class="n">document_state</span><span class="p">:</span> <span class="n">DocumentState</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">bibliography_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">template_overrides</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">document_context</span><span class="p">:</span> <span class="n">DocumentContext</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">binder_context</span><span class="p">:</span> <span class="n">BinderContext</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">rule_descriptions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">assets_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Artifacts produced during a document conversion.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.DiagnosticEmitter" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">DiagnosticEmitter</span>


<a href="#texsmith.core.conversion.DiagnosticEmitter" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Protocol">Protocol</span></code></p>



        <p>Interface used to surface warnings, errors, and structured events.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.DocumentContext" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">DocumentContext</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.conversion.DocumentContext" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">DocumentContext</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">source_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">base_level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">numbered</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">drop_title</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">title_from_heading</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">extracted_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">front_matter</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">slot_requests</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">slot_inclusions</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(),</span>
    <span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">bibliography</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">assets</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">AssetMapping</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">segments</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">SegmentContext</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Document-level context produced before rendering.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.FragmentOverrideError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">FragmentOverrideError</span>


<a href="#texsmith.core.conversion.FragmentOverrideError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="TemplateError (texsmith.core.templates.TemplateError)" href="../latex/#texsmith.core.templates.TemplateError">TemplateError</a></code></p>



        <p>Raised when fragment template overrides disagree.</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.GenerationStrategy" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">GenerationStrategy</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.conversion.GenerationStrategy" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">GenerationStrategy</span><span class="p">(</span>
    <span class="n">copy_assets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">convert_assets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">hash_assets</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">prefer_inputs</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">persist_manifest</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Rendering strategy toggles shared across conversion workflows.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.InputKind" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">InputKind</span>


<a href="#texsmith.core.conversion.InputKind" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>



        <p>Supported input modalities handled by the conversion pipeline.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.LoggingEmitter" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">LoggingEmitter</span>


<a href="#texsmith.core.conversion.LoggingEmitter" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">LoggingEmitter</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">logger_obj</span><span class="p">:</span> <span class="n">Logger</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">debug_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Emitter that forwards diagnostics to the standard logging module.</p>








                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>src/texsmith/core/diagnostics.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">logger_obj</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">debug_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">logger_obj</span> <span class="ow">or</span> <span class="n">logger</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug_enabled</span> <span class="o">=</span> <span class="n">debug_enabled</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.NullEmitter" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">NullEmitter</span>


<a href="#texsmith.core.conversion.NullEmitter" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">



        <p>Emitter that ignores every diagnostic.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.SegmentContext" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">SegmentContext</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.conversion.SegmentContext" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">SegmentContext</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">base_level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">bibliography</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">assets</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">AssetMapping</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">destination</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Represent a fragment destined for insertion into a template slot.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.TemplateBinding" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TemplateBinding</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.conversion.TemplateBinding" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">TemplateBinding</span><span class="p">(</span>
    <span class="n">runtime</span><span class="p">:</span> <span class="n">TemplateRuntime</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">instance</span><span class="p">:</span> <span class="n">WrappableTemplate</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">engine</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">requires_shell_escape</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">formatter_overrides</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">],</span>
    <span class="n">slots</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">TemplateSlot</span><span class="p">],</span>
    <span class="n">default_slot</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">base_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">required_partials</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(),</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Binding between slot requests and a <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> template.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="texsmith.core.conversion.TemplateBinding.apply_formatter_overrides" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">apply_formatter_overrides</span>


<a href="#texsmith.core.conversion.TemplateBinding.apply_formatter_overrides" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">apply_formatter_overrides</span><span class="p">(</span>
    <span class="n">formatter</span><span class="p">:</span> <span class="s2">&quot;LaTeXFormatter&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Apply template-provided overrides to a formatter.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/templates/runtime.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">apply_formatter_overrides</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">formatter</span><span class="p">:</span> <span class="s2">&quot;LaTeXFormatter&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Apply template-provided overrides to a formatter.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">override_path</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatter_overrides</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">formatter</span><span class="o">.</span><span class="n">override_template</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">override_path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.conversion.TemplateBinding.slot_levels" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">slot_levels</span>


<a href="#texsmith.core.conversion.TemplateBinding.slot_levels" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">slot_levels</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the resolved base level for each slot.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/templates/runtime.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">slot_levels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">offset</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the resolved base level for each slot.&quot;&quot;&quot;</span>
    <span class="n">base</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">base_level</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="n">offset</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">slot</span><span class="o">.</span><span class="n">resolve_level</span><span class="p">(</span><span class="n">base</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">slot</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">slots</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.TemplateFragment" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TemplateFragment</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.conversion.TemplateFragment" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">TemplateFragment</span><span class="p">(</span>
    <span class="n">stem</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">latex</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">default_slot</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">slot_outputs</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">slot_includes</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(),</span>
    <span class="n">document_state</span><span class="p">:</span> <span class="n">DocumentState</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">bibliography_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">template_engine</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">requires_shell_escape</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">template_overrides</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">output_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">front_matter</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">source_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">rule_descriptions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">assets</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Contract describing the artefacts required by TemplateRenderer.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.TemplateRenderer" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TemplateRenderer</span>


<a href="#texsmith.core.conversion.TemplateRenderer" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">TemplateRenderer</span><span class="p">(</span>
    <span class="n">runtime</span><span class="p">:</span> <span class="n">TemplateRuntime</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Aggregate conversion fragments and wrap them with a template.</p>








                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>src/texsmith/core/conversion/renderer.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">runtime</span><span class="p">:</span> <span class="n">TemplateRuntime</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">runtime</span> <span class="o">=</span> <span class="n">runtime</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">emitter</span> <span class="o">=</span> <span class="n">ensure_emitter</span><span class="p">(</span><span class="n">emitter</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.TemplateRendererResult" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TemplateRendererResult</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.conversion.TemplateRendererResult" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">TemplateRendererResult</span><span class="p">(</span>
    <span class="n">main_tex_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">fragment_paths</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">],</span>
    <span class="n">template_context</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">slot_content</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">document_state</span><span class="p">:</span> <span class="n">DocumentState</span><span class="p">,</span>
    <span class="n">bibliography_path</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">template_engine</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">requires_shell_escape</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">template_overrides</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">rule_descriptions</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">asset_paths</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">asset_sources</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
    <span class="n">asset_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">context_attributes</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(),</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Structured artefacts produced after aggregating slot content.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.TemplateRuntime" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TemplateRuntime</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.conversion.TemplateRuntime" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">TemplateRuntime</span><span class="p">(</span>
    <span class="n">instance</span><span class="p">:</span> <span class="n">WrappableTemplate</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">engine</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">requires_shell_escape</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">slots</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">TemplateSlot</span><span class="p">],</span>
    <span class="n">default_slot</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">formatter_overrides</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">],</span>
    <span class="n">base_level</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">required_partials</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(),</span>
    <span class="n">extras</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Resolved template metadata reused across conversions.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.conversion.UnsupportedInputError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">UnsupportedInputError</span>


<a href="#texsmith.core.conversion.UnsupportedInputError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="Exception">Exception</span></code></p>



        <p>Raised when a CLI input argument cannot be processed.</p>









    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.attempt_transformer_fallback" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">attempt_transformer_fallback</span>


<a href="#texsmith.core.conversion.attempt_transformer_fallback" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">attempt_transformer_fallback</span><span class="p">(</span>
    <span class="n">error</span><span class="p">:</span> <span class="n">LatexRenderingError</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Register placeholder converters when known transformers are unavailable.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">attempt_transformer_fallback</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="n">LatexRenderingError</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register placeholder converters when known transformers are unavailable.&quot;&quot;&quot;</span>
    <span class="n">cause</span> <span class="o">=</span> <span class="n">error</span><span class="o">.</span><span class="n">__cause__</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cause</span><span class="p">,</span> <span class="n">TransformerExecutionError</span><span class="p">):</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="n">message</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">cause</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">applied</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="s2">&quot;drawio&quot;</span> <span class="ow">in</span> <span class="n">message</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="s2">&quot;mermaid&quot;</span> <span class="ow">in</span> <span class="n">message</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;fetch-image&quot;</span> <span class="ow">in</span> <span class="n">message</span> <span class="ow">or</span> <span class="s2">&quot;fetch image&quot;</span> <span class="ow">in</span> <span class="n">message</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">has_converter</span><span class="p">(</span><span class="s2">&quot;fetch-image&quot;</span><span class="p">):</span>
        <span class="n">register_converter</span><span class="p">(</span><span class="s2">&quot;fetch-image&quot;</span><span class="p">,</span> <span class="n">_FallbackConverter</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">))</span>
        <span class="n">applied</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="n">applied</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.build_binder_context" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">build_binder_context</span>


<a href="#texsmith.core.conversion.build_binder_context" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">build_binder_context</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">document_context</span><span class="p">:</span> <span class="n">DocumentContext</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">template_runtime</span><span class="p">:</span> <span class="n">TemplateRuntime</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">requested_language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">bibliography_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">],</span>
    <span class="n">slot_overrides</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">strategy</span><span class="p">:</span> <span class="n">GenerationStrategy</span><span class="p">,</span>
    <span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">legacy_latex_accents</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">session_overrides</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">preloaded_bibliography</span><span class="p">:</span> <span class="n">BibliographyCollection</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">seen_bibliography_issues</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span>
        <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BinderContext</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Prepare template bindings, bibliography data, and slot mappings.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/templates.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">build_binder_context</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">document_context</span><span class="p">:</span> <span class="n">DocumentContext</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">template_runtime</span><span class="p">:</span> <span class="n">TemplateRuntime</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">requested_language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">bibliography_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">],</span>
    <span class="n">slot_overrides</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">strategy</span><span class="p">:</span> <span class="n">GenerationStrategy</span><span class="p">,</span>
    <span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">legacy_latex_accents</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">session_overrides</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">preloaded_bibliography</span><span class="p">:</span> <span class="n">BibliographyCollection</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">seen_bibliography_issues</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BinderContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Prepare template bindings, bibliography data, and slot mappings.&quot;&quot;&quot;</span>
    <span class="n">emitter</span> <span class="o">=</span> <span class="n">ensure_emitter</span><span class="p">(</span><span class="n">emitter</span><span class="p">)</span>
    <span class="n">resolved_language</span> <span class="o">=</span> <span class="n">resolve_template_language</span><span class="p">(</span><span class="n">requested_language</span><span class="p">,</span> <span class="n">document_context</span><span class="o">.</span><span class="n">front_matter</span><span class="p">)</span>
    <span class="n">document_context</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="n">resolved_language</span>

    <span class="n">config</span> <span class="o">=</span> <span class="n">BookConfig</span><span class="p">(</span>
        <span class="n">project_dir</span><span class="o">=</span><span class="n">document_context</span><span class="o">.</span><span class="n">source_path</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span>
        <span class="n">language</span><span class="o">=</span><span class="n">resolved_language</span><span class="p">,</span>
        <span class="n">legacy_latex_accents</span><span class="o">=</span><span class="n">legacy_latex_accents</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">inline_bibliography</span> <span class="o">=</span> <span class="n">extract_front_matter_bibliography</span><span class="p">(</span><span class="n">document_context</span><span class="o">.</span><span class="n">front_matter</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">InlineBibliographyValidationError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="n">raise_conversion_error</span><span class="p">(</span><span class="n">emitter</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">),</span> <span class="n">exc</span><span class="p">)</span>

    <span class="n">issue_signatures</span> <span class="o">=</span> <span class="n">seen_bibliography_issues</span> <span class="k">if</span> <span class="n">seen_bibliography_issues</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">bibliography_collection</span><span class="p">:</span> <span class="n">BibliographyCollection</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">preloaded_bibliography</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span> <span class="k">if</span> <span class="n">preloaded_bibliography</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="p">)</span>
    <span class="n">bibliography_map</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">bibliography_collection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">bibliography_collection</span> <span class="o">=</span> <span class="n">BibliographyCollection</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">bibliography_files</span><span class="p">:</span>
            <span class="n">bibliography_collection</span><span class="o">.</span><span class="n">load_files</span><span class="p">(</span><span class="n">bibliography_files</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">inline_bibliography</span><span class="p">:</span>
        <span class="n">_load_inline_bibliography</span><span class="p">(</span>
            <span class="n">bibliography_collection</span><span class="p">,</span>
            <span class="n">inline_bibliography</span><span class="p">,</span>
            <span class="n">source_label</span><span class="o">=</span><span class="n">document_context</span><span class="o">.</span><span class="n">source_path</span><span class="o">.</span><span class="n">stem</span><span class="p">,</span>
            <span class="n">output_dir</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span>
            <span class="n">emitter</span><span class="o">=</span><span class="n">emitter</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">bibliography_map</span> <span class="o">=</span> <span class="n">bibliography_collection</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">issue</span> <span class="ow">in</span> <span class="n">bibliography_collection</span><span class="o">.</span><span class="n">issues</span><span class="p">:</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="p">(</span><span class="n">issue</span><span class="o">.</span><span class="n">message</span><span class="p">,</span> <span class="n">issue</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">issue</span><span class="o">.</span><span class="n">source</span><span class="p">)</span> <span class="k">if</span> <span class="n">issue</span><span class="o">.</span><span class="n">source</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">signature</span> <span class="ow">in</span> <span class="n">issue_signatures</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">issue</span><span class="o">.</span><span class="n">key</span><span class="si">}</span><span class="s2">] &quot;</span> <span class="k">if</span> <span class="n">issue</span><span class="o">.</span><span class="n">key</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="n">source_hint</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="n">issue</span><span class="o">.</span><span class="n">source</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">if</span> <span class="n">issue</span><span class="o">.</span><span class="n">source</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="n">emitter</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}{</span><span class="n">issue</span><span class="o">.</span><span class="n">message</span><span class="si">}{</span><span class="n">source_hint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">issue_signatures</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>

    <span class="n">document_context</span><span class="o">.</span><span class="n">bibliography</span> <span class="o">=</span> <span class="n">bibliography_map</span>

    <span class="n">slot_requests</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">document_context</span><span class="o">.</span><span class="n">slot_requests</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">slot_overrides</span><span class="p">:</span>
        <span class="n">slot_requests</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">slot_overrides</span><span class="p">))</span>

    <span class="n">template_overrides</span> <span class="o">=</span> <span class="n">build_template_overrides</span><span class="p">(</span><span class="n">document_context</span><span class="o">.</span><span class="n">front_matter</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">session_overrides</span><span class="p">:</span>
        <span class="n">template_overrides</span> <span class="o">=</span> <span class="n">_merge_template_overrides</span><span class="p">(</span><span class="n">template_overrides</span><span class="p">,</span> <span class="n">session_overrides</span><span class="p">)</span>

    <span class="n">press_section</span> <span class="o">=</span> <span class="n">template_overrides</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;press&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">press_section</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">press_section</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_ensure_press_section</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">nonlocal</span> <span class="n">press_section</span>
        <span class="k">if</span> <span class="n">press_section</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">press_section</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">template_overrides</span><span class="p">[</span><span class="s2">&quot;press&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">press_section</span>
        <span class="k">return</span> <span class="n">press_section</span>

    <span class="k">if</span> <span class="n">document_context</span><span class="o">.</span><span class="n">extracted_title</span><span class="p">:</span>
        <span class="n">template_overrides</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="n">document_context</span><span class="o">.</span><span class="n">extracted_title</span><span class="p">)</span>
        <span class="n">_ensure_press_section</span><span class="p">()</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="n">document_context</span><span class="o">.</span><span class="n">extracted_title</span><span class="p">)</span>

    <span class="n">template_overrides</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="n">resolved_language</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">press_section</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="s2">&quot;press&quot;</span> <span class="ow">in</span> <span class="n">template_overrides</span><span class="p">:</span>
        <span class="n">_ensure_press_section</span><span class="p">()</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;language&quot;</span><span class="p">,</span> <span class="n">resolved_language</span><span class="p">)</span>

    <span class="n">template_overrides</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;_source_dir&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">document_context</span><span class="o">.</span><span class="n">source_path</span><span class="o">.</span><span class="n">parent</span><span class="p">))</span>
    <span class="n">template_overrides</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;_source_path&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">document_context</span><span class="o">.</span><span class="n">source_path</span><span class="p">))</span>
    <span class="n">template_overrides</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;source_dir&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">document_context</span><span class="o">.</span><span class="n">source_path</span><span class="o">.</span><span class="n">parent</span><span class="p">))</span>
    <span class="n">template_overrides</span><span class="p">[</span><span class="s2">&quot;output_dir&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span>

    <span class="n">raw_contexts</span> <span class="o">=</span> <span class="p">(</span><span class="n">template_overrides</span><span class="p">,</span> <span class="n">document_context</span><span class="o">.</span><span class="n">front_matter</span><span class="p">)</span>
    <span class="n">template_overrides</span> <span class="o">=</span> <span class="n">replace_mustaches_in_structure</span><span class="p">(</span>
        <span class="n">template_overrides</span><span class="p">,</span> <span class="n">raw_contexts</span><span class="p">,</span> <span class="n">emitter</span><span class="o">=</span><span class="n">emitter</span><span class="p">,</span> <span class="n">source</span><span class="o">=</span><span class="s2">&quot;template attributes&quot;</span>
    <span class="p">)</span>
    <span class="n">document_context</span><span class="o">.</span><span class="n">front_matter</span> <span class="o">=</span> <span class="n">replace_mustaches_in_structure</span><span class="p">(</span>
        <span class="n">document_context</span><span class="o">.</span><span class="n">front_matter</span><span class="p">,</span>
        <span class="n">raw_contexts</span><span class="p">,</span>
        <span class="n">emitter</span><span class="o">=</span><span class="n">emitter</span><span class="p">,</span>
        <span class="n">source</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">document_context</span><span class="o">.</span><span class="n">source_path</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">merged_contexts</span> <span class="o">=</span> <span class="p">(</span><span class="n">template_overrides</span><span class="p">,</span> <span class="n">document_context</span><span class="o">.</span><span class="n">front_matter</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">document_context</span><span class="o">.</span><span class="n">html</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">document_context</span><span class="o">.</span><span class="n">html</span> <span class="o">=</span> <span class="n">replace_mustaches</span><span class="p">(</span>
            <span class="n">document_context</span><span class="o">.</span><span class="n">html</span><span class="p">,</span>
            <span class="n">merged_contexts</span><span class="p">,</span>
            <span class="n">emitter</span><span class="o">=</span><span class="n">emitter</span><span class="p">,</span>
            <span class="n">source</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">document_context</span><span class="o">.</span><span class="n">source_path</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="n">active_slot_requests</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">binding</span><span class="p">:</span> <span class="n">TemplateBinding</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">binding</span><span class="p">,</span> <span class="n">active_slot_requests</span> <span class="o">=</span> <span class="n">resolve_template_binding</span><span class="p">(</span>
            <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
            <span class="n">template_runtime</span><span class="o">=</span><span class="n">template_runtime</span><span class="p">,</span>
            <span class="n">template_overrides</span><span class="o">=</span><span class="n">template_overrides</span><span class="p">,</span>
            <span class="n">slot_requests</span><span class="o">=</span><span class="n">slot_requests</span><span class="p">,</span>
            <span class="n">warn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">message</span><span class="p">:</span> <span class="n">emitter</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">message</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="n">TemplateError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">debug_enabled</span><span class="p">(</span><span class="n">emitter</span><span class="p">):</span>
            <span class="k">raise</span>
        <span class="n">raise_conversion_error</span><span class="p">(</span><span class="n">emitter</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">),</span> <span class="n">exc</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">binding</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># pragma: no cover - defensive</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Failed to resolve template binding.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">binding</span><span class="o">.</span><span class="n">runtime</span> <span class="ow">and</span> <span class="n">binding</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="n">extras</span><span class="p">:</span>
        <span class="n">template_mermaid</span> <span class="o">=</span> <span class="n">binding</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="n">extras</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;mermaid_config&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">template_mermaid</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">mermaid_config</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">mermaid_config</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">template_mermaid</span><span class="p">)</span>

    <span class="n">binder_context</span> <span class="o">=</span> <span class="n">BinderContext</span><span class="p">(</span>
        <span class="n">output_dir</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span>
        <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
        <span class="n">strategy</span><span class="o">=</span><span class="n">strategy</span><span class="p">,</span>
        <span class="n">language</span><span class="o">=</span><span class="n">resolved_language</span><span class="p">,</span>
        <span class="n">slot_requests</span><span class="o">=</span><span class="n">active_slot_requests</span><span class="p">,</span>
        <span class="n">template_overrides</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">template_overrides</span><span class="p">),</span>
        <span class="n">bibliography_map</span><span class="o">=</span><span class="n">bibliography_map</span><span class="p">,</span>
        <span class="n">bibliography_collection</span><span class="o">=</span><span class="n">bibliography_collection</span><span class="p">,</span>
        <span class="n">template_binding</span><span class="o">=</span><span class="n">binding</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">binder_context</span><span class="o">.</span><span class="n">documents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">document_context</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">binder_context</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.build_document_context" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">build_document_context</span>


<a href="#texsmith.core.conversion.build_document_context" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">build_document_context</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">source_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">front_matter</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">base_level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">drop_title</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">numbered</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">title_from_heading</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">extracted_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DocumentContext</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Construct a document context enriched with metadata and slot requests.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/inputs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">build_document_context</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">source_path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">front_matter</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">base_level</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">drop_title</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">numbered</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">title_from_heading</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">extracted_title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DocumentContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Construct a document context enriched with metadata and slot requests.&quot;&quot;&quot;</span>
    <span class="n">metadata</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">front_matter</span> <span class="ow">or</span> <span class="p">{})</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">press_payload</span> <span class="o">=</span> <span class="n">normalise_press_metadata</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">PressMetadataError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ConversionError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">))</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
    <span class="n">metadata</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;_source_dir&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">source_path</span><span class="o">.</span><span class="n">parent</span><span class="p">))</span>
    <span class="n">metadata</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;_source_path&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">source_path</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">press_payload</span><span class="p">:</span>
        <span class="n">press_payload</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;_source_dir&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">source_path</span><span class="o">.</span><span class="n">parent</span><span class="p">))</span>
        <span class="n">press_payload</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="s2">&quot;_source_path&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">source_path</span><span class="p">))</span>
    <span class="n">slot_requests</span> <span class="o">=</span> <span class="n">extract_front_matter_slots</span><span class="p">(</span><span class="n">metadata</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">DocumentContext</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">source_path</span><span class="o">=</span><span class="n">source_path</span><span class="p">,</span>
        <span class="n">html</span><span class="o">=</span><span class="n">html</span><span class="p">,</span>
        <span class="n">base_level</span><span class="o">=</span><span class="n">base_level</span><span class="p">,</span>
        <span class="n">numbered</span><span class="o">=</span><span class="n">numbered</span><span class="p">,</span>
        <span class="n">drop_title</span><span class="o">=</span><span class="n">drop_title</span><span class="p">,</span>
        <span class="n">title_from_heading</span><span class="o">=</span><span class="n">title_from_heading</span><span class="p">,</span>
        <span class="n">extracted_title</span><span class="o">=</span><span class="n">extracted_title</span><span class="p">,</span>
        <span class="n">front_matter</span><span class="o">=</span><span class="n">metadata</span><span class="p">,</span>
        <span class="n">slot_requests</span><span class="o">=</span><span class="n">slot_requests</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.build_template_overrides" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">build_template_overrides</span>


<a href="#texsmith.core.conversion.build_template_overrides" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">build_template_overrides</span><span class="p">(</span>
    <span class="n">front_matter</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Build template overrides from front matter while preserving metadata.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/templates/runtime.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">build_template_overrides</span><span class="p">(</span><span class="n">front_matter</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Build template overrides from front matter while preserving metadata.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">front_matter</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">front_matter</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="n">overrides</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">front_matter</span><span class="p">)</span>
    <span class="n">press_section</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;press&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">press_section</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
        <span class="n">overrides</span><span class="p">[</span><span class="s2">&quot;press&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">press_section</span><span class="p">)</span>

    <span class="n">fragments</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;fragments&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fragments</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">press_section</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
        <span class="n">fragments</span> <span class="o">=</span> <span class="n">press_section</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;fragments&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">fragments</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">overrides</span><span class="p">[</span><span class="s2">&quot;fragments&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">fragments</span><span class="p">)</span>

    <span class="n">callouts_section</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;callouts&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">callouts_section</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">press_section</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
        <span class="n">callouts_section</span> <span class="o">=</span> <span class="n">press_section</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;callouts&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">callouts_section</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
        <span class="n">overrides</span><span class="p">[</span><span class="s2">&quot;callouts&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">callouts_section</span><span class="p">)</span>

    <span class="n">callouts_style</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;callouts_style&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">callouts_style</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">press_section</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
        <span class="n">callouts_style</span> <span class="o">=</span> <span class="n">press_section</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;callouts_style&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">callouts_style</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">overrides</span><span class="p">[</span><span class="s2">&quot;callout_style&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">callouts_style</span>

    <span class="n">base_override</span> <span class="o">=</span> <span class="n">overrides</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;base_level&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">base_override</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">press_section</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
        <span class="n">base_override</span> <span class="o">=</span> <span class="n">press_section</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;base_level&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">base_override</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">overrides</span><span class="p">[</span><span class="s2">&quot;base_level&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">coerce_base_level</span><span class="p">(</span><span class="n">base_override</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">TemplateError</span><span class="p">:</span>
            <span class="n">overrides</span><span class="p">[</span><span class="s2">&quot;base_level&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">base_override</span>

    <span class="k">return</span> <span class="n">overrides</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.coerce_slot_selector" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">coerce_slot_selector</span>


<a href="#texsmith.core.conversion.coerce_slot_selector" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">coerce_slot_selector</span><span class="p">(</span><span class="n">payload</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Normalise a selector definition coming from front matter.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/inputs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">coerce_slot_selector</span><span class="p">(</span><span class="n">payload</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Normalise a selector definition coming from front matter.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">candidate</span> <span class="o">=</span> <span class="n">payload</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">candidate</span> <span class="ow">or</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">payload</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="s2">&quot;section&quot;</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">payload</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
                <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.convert_document" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">convert_document</span>


<a href="#texsmith.core.conversion.convert_document" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">convert_document</span><span class="p">(</span>
    <span class="n">document</span><span class="p">:</span> <span class="n">DocumentContext</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">parser</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">disable_fallback_converters</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">copy_assets</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">convert_assets</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">hash_assets</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">manifest</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">persist_debug_html</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">slot_overrides</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">bibliography_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">],</span>
    <span class="n">legacy_latex_accents</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">diagrams_backend</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">template_overrides</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">DocumentState</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">template_runtime</span><span class="p">:</span> <span class="n">TemplateRuntime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">wrap_document</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">preloaded_bibliography</span><span class="p">:</span> <span class="n">BibliographyCollection</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">seen_bibliography_issues</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span>
        <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ConversionResult</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Orchestrate the full HTML-to-<span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> conversion for a single document.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">convert_document</span><span class="p">(</span>
    <span class="n">document</span><span class="p">:</span> <span class="n">DocumentContext</span><span class="p">,</span>
    <span class="n">output_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">parser</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">disable_fallback_converters</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">copy_assets</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">convert_assets</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">hash_assets</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">manifest</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">template</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">persist_debug_html</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">language</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">slot_overrides</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">bibliography_files</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">Path</span><span class="p">],</span>
    <span class="n">legacy_latex_accents</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">diagrams_backend</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">template_overrides</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">DocumentState</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">template_runtime</span><span class="p">:</span> <span class="n">TemplateRuntime</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">wrap_document</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">preloaded_bibliography</span><span class="p">:</span> <span class="n">BibliographyCollection</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">seen_bibliography_issues</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ConversionResult</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Orchestrate the full HTML-to-LaTeX conversion for a single document.&quot;&quot;&quot;</span>
    <span class="n">emitter</span> <span class="o">=</span> <span class="n">ensure_emitter</span><span class="p">(</span><span class="n">emitter</span><span class="p">)</span>
    <span class="n">record_event</span><span class="p">(</span>
        <span class="n">emitter</span><span class="p">,</span>
        <span class="s2">&quot;convert_document&quot;</span><span class="p">,</span>
        <span class="p">{</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">source_path</span><span class="p">),</span>
            <span class="s2">&quot;template&quot;</span><span class="p">:</span> <span class="n">template</span><span class="p">,</span>
            <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">language</span><span class="p">,</span>
            <span class="s2">&quot;copy_assets&quot;</span><span class="p">:</span> <span class="n">copy_assets</span><span class="p">,</span>
            <span class="s2">&quot;convert_assets&quot;</span><span class="p">:</span> <span class="n">convert_assets</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">)</span>
    <span class="n">strategy</span> <span class="o">=</span> <span class="n">GenerationStrategy</span><span class="p">(</span>
        <span class="n">copy_assets</span><span class="o">=</span><span class="n">copy_assets</span><span class="p">,</span>
        <span class="n">convert_assets</span><span class="o">=</span><span class="n">convert_assets</span><span class="p">,</span>
        <span class="n">hash_assets</span><span class="o">=</span><span class="n">hash_assets</span><span class="p">,</span>
        <span class="n">prefer_inputs</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">persist_manifest</span><span class="o">=</span><span class="n">manifest</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">output_dir</span> <span class="o">=</span> <span class="n">output_dir</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>

    <span class="n">binder_context</span> <span class="o">=</span> <span class="n">build_binder_context</span><span class="p">(</span>
        <span class="n">document_context</span><span class="o">=</span><span class="n">document</span><span class="p">,</span>
        <span class="n">template</span><span class="o">=</span><span class="n">template</span><span class="p">,</span>
        <span class="n">template_runtime</span><span class="o">=</span><span class="n">template_runtime</span><span class="p">,</span>
        <span class="n">requested_language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span>
        <span class="n">bibliography_files</span><span class="o">=</span><span class="n">bibliography_files</span><span class="p">,</span>
        <span class="n">slot_overrides</span><span class="o">=</span><span class="n">slot_overrides</span><span class="p">,</span>
        <span class="n">output_dir</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span>
        <span class="n">strategy</span><span class="o">=</span><span class="n">strategy</span><span class="p">,</span>
        <span class="n">emitter</span><span class="o">=</span><span class="n">emitter</span><span class="p">,</span>
        <span class="n">legacy_latex_accents</span><span class="o">=</span><span class="n">legacy_latex_accents</span><span class="p">,</span>
        <span class="n">session_overrides</span><span class="o">=</span><span class="n">template_overrides</span><span class="p">,</span>
        <span class="n">preloaded_bibliography</span><span class="o">=</span><span class="n">preloaded_bibliography</span><span class="p">,</span>
        <span class="n">seen_bibliography_issues</span><span class="o">=</span><span class="n">seen_bibliography_issues</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">renderer_kwargs</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;output_root&quot;</span><span class="p">:</span> <span class="n">output_dir</span><span class="p">,</span>
        <span class="s2">&quot;copy_assets&quot;</span><span class="p">:</span> <span class="n">strategy</span><span class="o">.</span><span class="n">copy_assets</span><span class="p">,</span>
        <span class="s2">&quot;convert_assets&quot;</span><span class="p">:</span> <span class="n">strategy</span><span class="o">.</span><span class="n">convert_assets</span><span class="p">,</span>
        <span class="s2">&quot;hash_assets&quot;</span><span class="p">:</span> <span class="n">strategy</span><span class="o">.</span><span class="n">hash_assets</span><span class="p">,</span>
        <span class="s2">&quot;parser&quot;</span><span class="p">:</span> <span class="n">parser</span> <span class="ow">or</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">_render_document</span><span class="p">(</span>
        <span class="n">document_context</span><span class="o">=</span><span class="n">document</span><span class="p">,</span>
        <span class="n">binder_context</span><span class="o">=</span><span class="n">binder_context</span><span class="p">,</span>
        <span class="n">renderer_kwargs</span><span class="o">=</span><span class="n">renderer_kwargs</span><span class="p">,</span>
        <span class="n">strategy</span><span class="o">=</span><span class="n">strategy</span><span class="p">,</span>
        <span class="n">disable_fallback_converters</span><span class="o">=</span><span class="n">disable_fallback_converters</span><span class="p">,</span>
        <span class="n">persist_debug_html</span><span class="o">=</span><span class="n">persist_debug_html</span><span class="p">,</span>
        <span class="n">emitter</span><span class="o">=</span><span class="n">emitter</span><span class="p">,</span>
        <span class="n">initial_state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span>
        <span class="n">wrap_document</span><span class="o">=</span><span class="n">wrap_document</span><span class="p">,</span>
        <span class="n">legacy_latex_accents</span><span class="o">=</span><span class="n">legacy_latex_accents</span><span class="p">,</span>
        <span class="n">diagrams_backend</span><span class="o">=</span><span class="n">diagrams_backend</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.copy_document_state" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">copy_document_state</span>


<a href="#texsmith.core.conversion.copy_document_state" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">copy_document_state</span><span class="p">(</span>
    <span class="n">target</span><span class="p">:</span> <span class="n">DocumentState</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">DocumentState</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Synchronise <code>target</code> with a source <code>DocumentState</code> instance.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">copy_document_state</span><span class="p">(</span><span class="n">target</span><span class="p">:</span> <span class="n">DocumentState</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">DocumentState</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Synchronise ``target`` with a source ``DocumentState`` instance.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">metadata_field</span> <span class="ow">in</span> <span class="n">dataclasses</span><span class="o">.</span><span class="n">fields</span><span class="p">(</span><span class="n">DocumentState</span><span class="p">):</span>
        <span class="nb">setattr</span><span class="p">(</span>
            <span class="n">target</span><span class="p">,</span>
            <span class="n">metadata_field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">metadata_field</span><span class="o">.</span><span class="n">name</span><span class="p">)),</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.debug_enabled" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">debug_enabled</span>


<a href="#texsmith.core.conversion.debug_enabled" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">debug_enabled</span><span class="p">(</span><span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return whether debug mode is active for the given emitter.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/debug.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">debug_enabled</span><span class="p">(</span><span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return whether debug mode is active for the given emitter.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="n">emitter</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">emitter</span><span class="p">,</span> <span class="s2">&quot;debug_enabled&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.ensure_emitter" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">ensure_emitter</span>


<a href="#texsmith.core.conversion.ensure_emitter" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">ensure_emitter</span><span class="p">(</span>
    <span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DiagnosticEmitter</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return a usable emitter, defaulting to the null implementation.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/debug.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">ensure_emitter</span><span class="p">(</span><span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DiagnosticEmitter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a usable emitter, defaulting to the null implementation.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">emitter</span> <span class="k">if</span> <span class="n">emitter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">NullEmitter</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.ensure_fallback_converters" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">ensure_fallback_converters</span>


<a href="#texsmith.core.conversion.ensure_fallback_converters" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">ensure_fallback_converters</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Install placeholder converters for optional transformer dependencies.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">ensure_fallback_converters</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Install placeholder converters for optional transformer dependencies.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">is_docker_available</span><span class="p">():</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">has_converter</span><span class="p">(</span><span class="s2">&quot;fetch-image&quot;</span><span class="p">):</span>
        <span class="n">register_converter</span><span class="p">(</span><span class="s2">&quot;fetch-image&quot;</span><span class="p">,</span> <span class="n">_FallbackConverter</span><span class="p">(</span><span class="s2">&quot;image&quot;</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.extract_content" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_content</span>


<a href="#texsmith.core.conversion.extract_content" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_content</span><span class="p">(</span><span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">selector</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Extract and return the inner HTML for the first element matching selector.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/inputs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_content</span><span class="p">(</span><span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">selector</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract and return the inner HTML for the first element matching selector.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s2">&quot;lxml&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">FeatureNotFound</span><span class="p">:</span>
        <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

    <span class="n">element</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">select_one</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">element</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unable to locate content using selector &#39;</span><span class="si">{</span><span class="n">selector</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">element</span><span class="o">.</span><span class="n">decode_contents</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.extract_front_matter_bibliography" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_front_matter_bibliography</span>


<a href="#texsmith.core.conversion.extract_front_matter_bibliography" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_front_matter_bibliography</span><span class="p">(</span>
    <span class="n">front_matter</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">InlineBibliographyEntry</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return inline bibliography entries declared in the document front matter.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/inputs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_front_matter_bibliography</span><span class="p">(</span>
    <span class="n">front_matter</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">InlineBibliographyEntry</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return inline bibliography entries declared in the document front matter.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">front_matter</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{}</span>

    <span class="n">bibliography</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">InlineBibliographyEntry</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">container</span> <span class="o">=</span> <span class="n">front_matter</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;bibliography&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">container</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">container</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">entry</span> <span class="o">=</span> <span class="n">_parse_inline_bibliography_entry</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="n">bibliography</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>

    <span class="k">return</span> <span class="n">bibliography</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.extract_front_matter_slots" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_front_matter_slots</span>


<a href="#texsmith.core.conversion.extract_front_matter_slots" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_front_matter_slots</span><span class="p">(</span>
    <span class="n">front_matter</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Collect slot overrides defined in document front matter.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/inputs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_front_matter_slots</span><span class="p">(</span><span class="n">front_matter</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Collect slot overrides defined in document front matter.&quot;&quot;&quot;</span>
    <span class="n">overrides</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">root_slots</span> <span class="o">=</span> <span class="n">front_matter</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;slots&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">front_matter</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;entrypoints&quot;</span><span class="p">)</span>
    <span class="n">overrides</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">parse_slot_mapping</span><span class="p">(</span><span class="n">root_slots</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">overrides</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.extract_slot_fragments" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">extract_slot_fragments</span>


<a href="#texsmith.core.conversion.extract_slot_fragments" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">extract_slot_fragments</span><span class="p">(</span>
    <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">requests</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">default_slot</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">slot_definitions</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">TemplateSlot</span><span class="p">],</span>
    <span class="n">parser_backend</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">SlotFragment</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Split the HTML document into fragments mapped to template slots.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/templates.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">extract_slot_fragments</span><span class="p">(</span>
    <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">requests</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">default_slot</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">slot_definitions</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">TemplateSlot</span><span class="p">],</span>
    <span class="n">parser_backend</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="n">SlotFragment</span><span class="p">],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Split the HTML document into fragments mapped to template slots.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">parser_backend</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">FeatureNotFound</span><span class="p">:</span>
        <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="s2">&quot;html.parser&quot;</span><span class="p">)</span>

    <span class="n">container</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">body</span> <span class="ow">or</span> <span class="n">soup</span>
    <span class="n">document_html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">container</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span>

    <span class="n">wildcard_values</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">DOCUMENT_SELECTOR_SENTINEL</span><span class="p">,</span>
        <span class="n">DOCUMENT_SELECTOR_SENTINEL</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
        <span class="s2">&quot;*&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">full_document_slots</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">filtered_requests</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">slot_name</span><span class="p">,</span> <span class="n">selector</span> <span class="ow">in</span> <span class="n">requests</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">selector</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">token</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">wildcard_values</span><span class="p">:</span>
            <span class="n">full_document_slots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">slot_name</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="n">filtered_requests</span><span class="p">[</span><span class="n">slot_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">selector</span>

    <span class="n">headings</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tag</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">heading</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^h[1-6]$&quot;</span><span class="p">),</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">True</span><span class="p">)):</span>
        <span class="n">headings</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">index</span><span class="p">,</span> <span class="n">heading</span><span class="p">))</span>

    <span class="n">matched</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tag</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">missing</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">occupied_nodes</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">document_nodes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">slot_name</span><span class="p">,</span> <span class="n">selector</span> <span class="ow">in</span> <span class="n">filtered_requests</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">selector</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">target_label</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;#&quot;</span><span class="p">)</span>
        <span class="n">matched_heading</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Tag</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">heading</span> <span class="ow">in</span> <span class="n">headings</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">id</span><span class="p">(</span><span class="n">heading</span><span class="p">)</span> <span class="ow">in</span> <span class="n">occupied_nodes</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">node_id</span> <span class="o">=</span> <span class="n">heading</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node_id</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">node_id</span> <span class="o">==</span> <span class="n">target_label</span><span class="p">:</span>
                <span class="n">matched_heading</span> <span class="o">=</span> <span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">heading</span><span class="p">)</span>
                <span class="k">break</span>
        <span class="k">if</span> <span class="n">matched_heading</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">heading</span> <span class="ow">in</span> <span class="n">headings</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">id</span><span class="p">(</span><span class="n">heading</span><span class="p">)</span> <span class="ow">in</span> <span class="n">occupied_nodes</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="n">heading</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="n">strip</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="n">selector</span><span class="p">:</span>
                    <span class="n">matched_heading</span> <span class="o">=</span> <span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">heading</span><span class="p">)</span>
                    <span class="k">break</span>
        <span class="k">if</span> <span class="n">matched_heading</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">missing</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;unable to locate section &#39;</span><span class="si">{</span><span class="n">selector</span><span class="si">}</span><span class="s2">&#39; for slot &#39;</span><span class="si">{</span><span class="n">slot_name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="n">matched_index</span><span class="p">,</span> <span class="n">heading</span> <span class="o">=</span> <span class="n">matched_heading</span>
        <span class="n">occupied_nodes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">heading</span><span class="p">))</span>
        <span class="n">matched</span><span class="p">[</span><span class="n">slot_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">matched_index</span><span class="p">,</span> <span class="n">heading</span><span class="p">)</span>

    <span class="n">fragments</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">SlotFragment</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">offset</span><span class="p">,</span> <span class="n">slot_name</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">full_document_slots</span><span class="p">):</span>
        <span class="n">fragments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">SlotFragment</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">slot_name</span><span class="p">,</span>
                <span class="n">html</span><span class="o">=</span><span class="n">document_html</span><span class="p">,</span>
                <span class="n">position</span><span class="o">=-</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">full_document_slots</span><span class="p">)</span> <span class="o">-</span> <span class="n">offset</span><span class="p">),</span>
                <span class="n">heading_levels</span><span class="o">=</span><span class="n">_heading_levels_for_nodes</span><span class="p">(</span><span class="n">document_nodes</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">for</span> <span class="n">slot_name</span><span class="p">,</span> <span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="n">heading</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">matched</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">section_nodes</span> <span class="o">=</span> <span class="n">collect_section_nodes</span><span class="p">(</span><span class="n">heading</span><span class="p">)</span>
        <span class="n">slot_config</span> <span class="o">=</span> <span class="n">slot_definitions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">slot_name</span><span class="p">)</span>
        <span class="n">strip_heading</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">slot_config</span><span class="o">.</span><span class="n">strip_heading</span><span class="p">)</span> <span class="k">if</span> <span class="n">slot_config</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="n">render_nodes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">section_nodes</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">strip_heading</span> <span class="ow">and</span> <span class="n">render_nodes</span><span class="p">:</span>
            <span class="n">render_nodes</span> <span class="o">=</span> <span class="n">render_nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="k">while</span> <span class="n">render_nodes</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">render_nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">NavigableString</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">render_nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
                    <span class="k">break</span>
                <span class="n">render_nodes</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">html_fragment</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">render_nodes</span><span class="p">)</span>
        <span class="n">fragments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="n">SlotFragment</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="n">slot_name</span><span class="p">,</span>
                <span class="n">html</span><span class="o">=</span><span class="n">html_fragment</span><span class="p">,</span>
                <span class="n">position</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
                <span class="n">heading_levels</span><span class="o">=</span><span class="n">_heading_levels_for_nodes</span><span class="p">(</span><span class="n">render_nodes</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">section_nodes</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="s2">&quot;extract&quot;</span><span class="p">):</span>
                <span class="n">node</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>

    <span class="n">container</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">body</span> <span class="ow">or</span> <span class="n">soup</span>
    <span class="k">if</span> <span class="n">full_document_slots</span><span class="p">:</span>
        <span class="n">remainder_html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">remainder_html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">container</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span>

    <span class="n">remainder_position</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">fragment</span><span class="o">.</span><span class="n">position</span> <span class="k">for</span> <span class="n">fragment</span> <span class="ow">in</span> <span class="n">fragments</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">fragments</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="n">fragments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="n">SlotFragment</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="n">default_slot</span><span class="p">,</span>
            <span class="n">html</span><span class="o">=</span><span class="n">remainder_html</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">remainder_position</span><span class="p">,</span>
            <span class="n">heading_levels</span><span class="o">=</span><span class="n">_heading_levels_for_nodes</span><span class="p">(</span><span class="n">container</span><span class="o">.</span><span class="n">contents</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="n">fragments</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">fragment</span><span class="p">:</span> <span class="n">fragment</span><span class="o">.</span><span class="n">position</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fragments</span><span class="p">,</span> <span class="n">missing</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.format_rendering_error" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">format_rendering_error</span>


<a href="#texsmith.core.conversion.format_rendering_error" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">format_rendering_error</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="n">LatexRenderingError</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Format a human-readable rendering failure summary.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/debug.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_rendering_error</span><span class="p">(</span><span class="n">error</span><span class="p">:</span> <span class="n">LatexRenderingError</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Format a human-readable rendering failure summary.&quot;&quot;&quot;</span>
    <span class="n">cause</span> <span class="o">=</span> <span class="n">error</span><span class="o">.</span><span class="n">__cause__</span>
    <span class="k">if</span> <span class="n">cause</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;LaTeX rendering failed: </span><span class="si">{</span><span class="n">cause</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.heading_level_for" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">heading_level_for</span>


<a href="#texsmith.core.conversion.heading_level_for" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">heading_level_for</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n">Tag</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the numeric level of a heading element.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/templates.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">heading_level_for</span><span class="p">(</span><span class="n">node</span><span class="p">:</span> <span class="n">Tag</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the numeric level of a heading element.&quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">re</span><span class="o">.</span><span class="n">fullmatch</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;h[1-6]&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected heading element, got &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.load_template_runtime" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">load_template_runtime</span>


<a href="#texsmith.core.conversion.load_template_runtime" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">load_template_runtime</span><span class="p">(</span><span class="n">template</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TemplateRuntime</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Resolve template metadata for repeated conversions.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/templates/runtime.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_template_runtime</span><span class="p">(</span><span class="n">template</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TemplateRuntime</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Resolve template metadata for repeated conversions.&quot;&quot;&quot;</span>
    <span class="n">template_instance</span> <span class="o">=</span> <span class="n">load_template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>

    <span class="n">template_base</span> <span class="o">=</span> <span class="n">coerce_base_level</span><span class="p">(</span>
        <span class="n">template_instance</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">get_attribute_default</span><span class="p">(</span><span class="s2">&quot;base_level&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">slots</span><span class="p">,</span> <span class="n">default_slot</span> <span class="o">=</span> <span class="n">template_instance</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">resolve_slots</span><span class="p">()</span>
    <span class="n">formatter_overrides</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">template_instance</span><span class="o">.</span><span class="n">iter_formatter_overrides</span><span class="p">())</span>
    <span class="n">extras_payload</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">template_instance</span><span class="p">,</span> <span class="s2">&quot;extras&quot;</span><span class="p">,</span> <span class="p">{})</span> <span class="ow">or</span> <span class="p">{}</span>
    <span class="n">extras</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">value</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">extras_payload</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
    <span class="n">declared_fragments</span> <span class="o">=</span> <span class="p">(</span>
        <span class="nb">list</span><span class="p">(</span><span class="n">template_instance</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">fragments</span><span class="p">)</span> <span class="k">if</span> <span class="n">template_instance</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">fragments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="p">)</span>
    <span class="n">extras</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span>
        <span class="s2">&quot;fragments&quot;</span><span class="p">,</span>
        <span class="n">declared_fragments</span> <span class="k">if</span> <span class="n">declared_fragments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="p">[],</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">TemplateRuntime</span><span class="p">(</span>
        <span class="n">instance</span><span class="o">=</span><span class="n">template_instance</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">template_instance</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="n">engine</span><span class="o">=</span><span class="n">template_instance</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">engine</span><span class="p">,</span>
        <span class="n">requires_shell_escape</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="n">template_instance</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">shell_escape</span><span class="p">),</span>
        <span class="n">slots</span><span class="o">=</span><span class="n">slots</span><span class="p">,</span>
        <span class="n">default_slot</span><span class="o">=</span><span class="n">default_slot</span><span class="p">,</span>
        <span class="n">formatter_overrides</span><span class="o">=</span><span class="n">formatter_overrides</span><span class="p">,</span>
        <span class="n">base_level</span><span class="o">=</span><span class="n">template_base</span><span class="p">,</span>
        <span class="n">required_partials</span><span class="o">=</span><span class="nb">set</span><span class="p">(</span><span class="n">template_instance</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">required_partials</span> <span class="ow">or</span> <span class="p">[]),</span>
        <span class="n">extras</span><span class="o">=</span><span class="n">extras</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.parse_slot_mapping" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">parse_slot_mapping</span>


<a href="#texsmith.core.conversion.parse_slot_mapping" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">parse_slot_mapping</span><span class="p">(</span><span class="n">raw</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Parse slot mappings declared in front matter structures.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/inputs.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">parse_slot_mapping</span><span class="p">(</span><span class="n">raw</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Parse slot mappings declared in front matter structures.&quot;&quot;&quot;</span>
    <span class="n">overrides</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">raw</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">overrides</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">slot_name</span><span class="p">,</span> <span class="n">payload</span> <span class="ow">in</span> <span class="n">raw</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">slot_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">selector</span> <span class="o">=</span> <span class="n">coerce_slot_selector</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">selector</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">slot_name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">key</span><span class="p">:</span>
                    <span class="n">overrides</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">selector</span>
        <span class="k">return</span> <span class="n">overrides</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="nb">str</span> <span class="o">|</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">raw</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">slot_name</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;target&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;slot&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">slot_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">continue</span>
            <span class="n">selector</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;label&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;section&quot;</span><span class="p">)</span>
            <span class="n">selector_value</span> <span class="o">=</span> <span class="n">coerce_slot_selector</span><span class="p">(</span><span class="n">selector</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">selector_value</span><span class="p">:</span>
                <span class="n">selector_value</span> <span class="o">=</span> <span class="n">coerce_slot_selector</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
            <span class="n">slot_key</span> <span class="o">=</span> <span class="n">slot_name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">slot_key</span> <span class="ow">and</span> <span class="n">selector_value</span><span class="p">:</span>
                <span class="n">overrides</span><span class="p">[</span><span class="n">slot_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">selector_value</span>
        <span class="k">return</span> <span class="n">overrides</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">raw</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">entry</span> <span class="ow">and</span> <span class="s2">&quot;:&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">selector</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">selector</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">and</span> <span class="n">selector</span><span class="p">:</span>
                <span class="n">overrides</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">selector</span>
        <span class="k">return</span> <span class="n">overrides</span>

    <span class="k">return</span> <span class="n">overrides</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.persist_debug_artifacts" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">persist_debug_artifacts</span>


<a href="#texsmith.core.conversion.persist_debug_artifacts" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">persist_debug_artifacts</span><span class="p">(</span>
    <span class="n">output_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">html</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Persist intermediate HTML snapshots to aid debugging.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/debug.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">persist_debug_artifacts</span><span class="p">(</span><span class="n">output_dir</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">source</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Persist intermediate HTML snapshots to aid debugging.&quot;&quot;&quot;</span>
    <span class="n">output_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">debug_path</span> <span class="o">=</span> <span class="n">output_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">source</span><span class="o">.</span><span class="n">stem</span><span class="si">}</span><span class="s2">.debug.html&quot;</span>
    <span class="n">debug_path</span><span class="o">.</span><span class="n">write_text</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.raise_conversion_error" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">raise_conversion_error</span>


<a href="#texsmith.core.conversion.raise_conversion_error" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">raise_conversion_error</span><span class="p">(</span>
    <span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">exc</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Emit an error diagnostic before raising a conversion failure.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/debug.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">raise_conversion_error</span><span class="p">(</span>
    <span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">exc</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Emit an error diagnostic before raising a conversion failure.&quot;&quot;&quot;</span>
    <span class="n">ensure_emitter</span><span class="p">(</span><span class="n">emitter</span><span class="p">)</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">exc</span><span class="p">)</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">ConversionError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
    <span class="n">error</span><span class="o">.</span><span class="n">_texsmith_logged</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># noqa: SLF001</span>
    <span class="k">raise</span> <span class="n">error</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.record_event" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">record_event</span>


<a href="#texsmith.core.conversion.record_event" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">record_event</span><span class="p">(</span>
    <span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">payload</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Forward a structured diagnostic event.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/debug.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">record_event</span><span class="p">(</span>
    <span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">event</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">payload</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Forward a structured diagnostic event.&quot;&quot;&quot;</span>
    <span class="n">ensure_emitter</span><span class="p">(</span><span class="n">emitter</span><span class="p">)</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">payload</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.render_with_fallback" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">render_with_fallback</span>


<a href="#texsmith.core.conversion.render_with_fallback" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">render_with_fallback</span><span class="p">(</span>
    <span class="n">renderer_factory</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">LaTeXRenderer</span><span class="p">],</span>
    <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">runtime</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">],</span>
    <span class="n">bibliography</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span>
    <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">DocumentState</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DocumentState</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Render HTML to <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span>, retrying with fallback converters when available.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/conversion/core.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">render_with_fallback</span><span class="p">(</span>
    <span class="n">renderer_factory</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[[],</span> <span class="n">LaTeXRenderer</span><span class="p">],</span>
    <span class="n">html</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">runtime</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">],</span>
    <span class="n">bibliography</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">state</span><span class="p">:</span> <span class="n">DocumentState</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">emitter</span><span class="p">:</span> <span class="n">DiagnosticEmitter</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">DocumentState</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Render HTML to LaTeX, retrying with fallback converters when available.&quot;&quot;&quot;</span>
    <span class="n">emitter</span> <span class="o">=</span> <span class="n">ensure_emitter</span><span class="p">(</span><span class="n">emitter</span><span class="p">)</span>
    <span class="n">attempts</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">bibliography_payload</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">bibliography</span> <span class="ow">or</span> <span class="p">{})</span>
    <span class="n">base_state</span> <span class="o">=</span> <span class="n">state</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">current_state</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">base_state</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">base_state</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="n">DocumentState</span><span class="p">(</span><span class="n">bibliography</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">bibliography_payload</span><span class="p">))</span>
        <span class="p">)</span>

        <span class="n">renderer</span> <span class="o">=</span> <span class="n">renderer_factory</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
                <span class="n">html</span><span class="p">,</span>
                <span class="n">runtime</span><span class="o">=</span><span class="n">runtime</span><span class="p">,</span>
                <span class="n">state</span><span class="o">=</span><span class="n">current_state</span><span class="p">,</span>
                <span class="n">emitter</span><span class="o">=</span><span class="n">emitter</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">LatexRenderingError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="n">attempts</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">attempts</span> <span class="o">&gt;=</span> <span class="mi">5</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">attempt_transformer_fallback</span><span class="p">(</span><span class="n">exc</span><span class="p">):</span>
                <span class="k">raise</span>
            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">base_state</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">copy_document_state</span><span class="p">(</span><span class="n">base_state</span><span class="p">,</span> <span class="n">current_state</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">output</span><span class="p">,</span> <span class="n">base_state</span>

        <span class="k">return</span> <span class="n">output</span><span class="p">,</span> <span class="n">current_state</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.conversion.resolve_template_language" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">resolve_template_language</span>


<a href="#texsmith.core.conversion.resolve_template_language" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">resolve_template_language</span><span class="p">(</span>
    <span class="n">explicit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">front_matter</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Resolve the effective template language from CLI and front matter inputs.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/templates/runtime.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">resolve_template_language</span><span class="p">(</span>
    <span class="n">explicit</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">front_matter</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Resolve the effective template language from CLI and front matter inputs.&quot;&quot;&quot;</span>
    <span class="n">candidates</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">normalise_template_language</span><span class="p">(</span><span class="n">explicit</span><span class="p">),</span>
        <span class="n">normalise_template_language</span><span class="p">(</span><span class="n">extract_language_from_front_matter</span><span class="p">(</span><span class="n">front_matter</span><span class="p">)),</span>
    <span class="p">)</span>

    <span class="k">for</span> <span class="n">candidate</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">candidate</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">candidate</span>

    <span class="k">return</span> <span class="n">DEFAULT_TEMPLATE_LANGUAGE</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="diagnostics-emitters">Diagnostics emitters<a class="headerlink" href="#diagnostics-emitters" title="Permanent link">&para;</a></h2>
<p><code>texsmith.core.diagnostics</code> defines the <code>DiagnosticEmitter</code> protocol plus a few
stock implementations. Pass any emitter into <code>ConversionService</code>,
<code>convert_documents</code>, or <code>TemplateSession</code> to intercept warnings, errors, and
structured events.</p>
<table>
<thead>
<tr>
<th>Emitter</th>
<th>Description</th>
<th>Typical usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CliEmitter</code> (<code>texsmith.ui.cli.diagnostics</code>)</td>
<td>Rich-powered emitter used by the Typer CLI. Respects <code>-v</code> and <code>--debug</code>, paints warnings as panels, and streams structured events to the diagnostics sidebar.</td>
<td>Default when running <code>texsmith</code>. Import it in automation scripts when you want human-friendly output.</td>
</tr>
<tr>
<td><code>LoggingEmitter</code></td>
<td>Forwards <code>warning</code>, <code>error</code>, and <code>event</code> calls to the standard <code>logging</code> module.</td>
<td>Daemons, notebooks, or services that rely on existing logging policy.</td>
</tr>
<tr>
<td><code>NullEmitter</code></td>
<td>No-op implementation. Useful when you want silent conversions or plan to capture diagnostics out-of-band.</td>
<td>Unit tests and benchmarking.</td>
</tr>
</tbody>
</table>
<p>Emitters expose a <code>debug_enabled</code> flag so downstream handlers can decide whether
to include stack traces or expensive state dumps. Implement your own to route
diagnostics to metrics systems or structured loggers.</p>


<div class="doc doc-object doc-module">



<a id="texsmith.core.diagnostics"></a>
    <div class="doc doc-contents first">

        <p>Diagnostic abstractions shared across the conversion pipeline.</p>










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="texsmith.core.diagnostics.DiagnosticEmitter" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">DiagnosticEmitter</span>


<a href="#texsmith.core.diagnostics.DiagnosticEmitter" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Protocol">Protocol</span></code></p>



        <p>Interface used to surface warnings, errors, and structured events.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.diagnostics.LoggingEmitter" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">LoggingEmitter</span>


<a href="#texsmith.core.diagnostics.LoggingEmitter" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">LoggingEmitter</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">logger_obj</span><span class="p">:</span> <span class="n">Logger</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">debug_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Emitter that forwards diagnostics to the standard logging module.</p>








                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>src/texsmith/core/diagnostics.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">logger_obj</span><span class="p">:</span> <span class="n">logging</span><span class="o">.</span><span class="n">Logger</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">debug_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">logger_obj</span> <span class="ow">or</span> <span class="n">logger</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug_enabled</span> <span class="o">=</span> <span class="n">debug_enabled</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.diagnostics.NullEmitter" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">NullEmitter</span>


<a href="#texsmith.core.diagnostics.NullEmitter" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">



        <p>Emitter that ignores every diagnostic.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="texsmith.core.diagnostics.format_event_message" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">format_event_message</span>


<a href="#texsmith.core.diagnostics.format_event_message" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">format_event_message</span><span class="p">(</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">payload</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return a human-friendly summary for selected diagnostic events.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/diagnostics.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">format_event_message</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">payload</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a human-friendly summary for selected diagnostic events.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">payload</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>  <span class="c1"># pragma: no cover - defensive</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;asset_fetch&quot;</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&lt;unknown&gt;&quot;</span>
        <span class="n">convert</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;convert&quot;</span><span class="p">)</span>
        <span class="n">suffix_hint</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;suffix_hint&quot;</span><span class="p">)</span>
        <span class="n">details</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">convert</span><span class="p">:</span>
            <span class="n">details</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;convert&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">suffix_hint</span><span class="p">:</span>
            <span class="n">details</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;suffix=</span><span class="si">{</span><span class="n">suffix_hint</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">suffix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">details</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">if</span> <span class="n">details</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Fetching: </span><span class="si">{</span><span class="n">url</span><span class="si">}{</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;asset_fetch_cached&quot;</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&lt;unknown&gt;&quot;</span>
        <span class="n">reason</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;reason&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;cache&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Reusing cached remote image: </span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">reason</span><span class="si">}</span><span class="s2">)&quot;</span>

    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;doi_fetch&quot;</span><span class="p">:</span>
        <span class="n">doi_value</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;doi&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&lt;unknown&gt;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="s2">&quot;&lt;unknown&gt;&quot;</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;mode&quot;</span><span class="p">)</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;resolved_source&quot;</span><span class="p">)</span>
        <span class="n">details</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">mode</span><span class="p">:</span>
            <span class="n">details</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">mode</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">source</span><span class="p">:</span>
            <span class="n">details</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">source</span><span class="p">))</span>
        <span class="n">suffix</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot; (</span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">details</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span> <span class="k">if</span> <span class="n">details</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;Resolved DOI </span><span class="si">{</span><span class="n">doi_value</span><span class="si">}</span><span class="s2"> for entry &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39;</span><span class="si">{</span><span class="n">suffix</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="texsmith.core.exceptions"></a>
    <div class="doc doc-contents first">

        <p>Custom exception hierarchy for the <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> rendering pipeline.</p>










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="texsmith.core.exceptions.AssetMissingError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">AssetMissingError</span>


<a href="#texsmith.core.exceptions.AssetMissingError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="LatexRenderingError (texsmith.core.exceptions.LatexRenderingError)" href="#texsmith.core.exceptions.LatexRenderingError">LatexRenderingError</a></code></p>



        <p>Raised when an expected asset cannot be located or generated.</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.exceptions.InvalidNodeError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">InvalidNodeError</span>


<a href="#texsmith.core.exceptions.InvalidNodeError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="LatexRenderingError (texsmith.core.exceptions.LatexRenderingError)" href="#texsmith.core.exceptions.LatexRenderingError">LatexRenderingError</a></code></p>



        <p>Raised when a handler receives an unexpected DOM node shape.</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.exceptions.LatexRenderingError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">LatexRenderingError</span>


<a href="#texsmith.core.exceptions.LatexRenderingError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="RuntimeError">RuntimeError</span></code></p>



        <p>Base exception for <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> rendering failures.</p>









    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.exceptions.TransformerExecutionError" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">TransformerExecutionError</span>


<a href="#texsmith.core.exceptions.TransformerExecutionError" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="LatexRenderingError (texsmith.core.exceptions.LatexRenderingError)" href="#texsmith.core.exceptions.LatexRenderingError">LatexRenderingError</a></code></p>



        <p>Raised when an external converter fails to execute properly.</p>









    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="texsmith.core.exceptions.exception_hint" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">exception_hint</span>


<a href="#texsmith.core.exceptions.exception_hint" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">exception_hint</span><span class="p">(</span><span class="n">exc</span><span class="p">:</span> <span class="ne">BaseException</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the most specific message available for an exception chain.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/exceptions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">exception_hint</span><span class="p">(</span><span class="n">exc</span><span class="p">:</span> <span class="ne">BaseException</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the most specific message available for an exception chain.&quot;&quot;&quot;</span>
    <span class="n">messages</span> <span class="o">=</span> <span class="n">exception_messages</span><span class="p">(</span><span class="n">exc</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">messages</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">messages</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.core.exceptions.exception_messages" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">exception_messages</span>


<a href="#texsmith.core.exceptions.exception_messages" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">exception_messages</span><span class="p">(</span><span class="n">exc</span><span class="p">:</span> <span class="ne">BaseException</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the collected message chain for an exception and its causes.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/exceptions.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">exception_messages</span><span class="p">(</span><span class="n">exc</span><span class="p">:</span> <span class="ne">BaseException</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the collected message chain for an exception and its causes.&quot;&quot;&quot;</span>
    <span class="n">messages</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">visited</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">current</span><span class="p">:</span> <span class="ne">BaseException</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">exc</span>
    <span class="k">while</span> <span class="n">current</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">id</span><span class="p">(</span><span class="n">current</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">:</span>
        <span class="n">visited</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">current</span><span class="p">))</span>
        <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">current</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">text</span><span class="p">:</span>
            <span class="n">first_line</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">first_line</span><span class="p">:</span>
                <span class="n">messages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">first_line</span><span class="p">)</span>
        <span class="n">current</span> <span class="o">=</span> <span class="n">current</span><span class="o">.</span><span class="n">__cause__</span> <span class="ow">or</span> <span class="n">current</span><span class="o">.</span><span class="n">__context__</span>
    <span class="k">return</span> <span class="n">messages</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="texsmith.core.rules"></a>
    <div class="doc doc-contents first">

        <p>Rule declaration and execution engine for the <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> renderer.</p>
<p>This module implements the rule-based architecture that powers Texsmith's
HTML-to-<span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> pipeline. Handlers declare their intent via the <code>@renders</code>
decorator, which records structural metadata (phase, priority, targeted tags).
At runtime the :class:<code>RenderEngine</code> collects those declarations, organises them
per :class:<code>RenderPhase</code>, and walks the BeautifulSoup DOM ensuring that each
pass is executed in a predictable, stable order.</p>
<p>Architecture</p>
<dl>
<dt><code>Declaration layer</code></dt>
<dd><code>@renders</code> stores a lightweight :class:<code>RuleDefinition</code> on every handler.</dd>
<dt><code>Registry layer</code></dt>
<dd>:class:<code>RenderRegistry</code> collates definitions into sortable :class:<code>RenderRule</code>
  instances grouped by phase/tag.</dd>
<dt><code>Execution layer</code></dt>
<dd>:class:<code>RenderEngine</code> coordinates multi-pass traversal using the private</dd>
</dl>
<p>:class:<code>_DOMVisitor</code> to apply handlers depth-first while respecting
  auto-marking and child-suppression semantics.</p>
<p>This separation keeps rule authors focused on transformations while the engine
handles ordering, deduplication, and orchestration concerns.</p>










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="texsmith.core.rules.RenderEngine" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">RenderEngine</span>


<a href="#texsmith.core.rules.RenderEngine" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">RenderEngine</span><span class="p">(</span><span class="n">registry</span><span class="p">:</span> <span class="n">RenderRegistry</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Execution engine that orchestrates the registered rules.</p>








                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>src/texsmith/core/rules.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">304</span>
<span class="normal">305</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">registry</span><span class="p">:</span> <span class="n">RenderRegistry</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">registry</span> <span class="o">=</span> <span class="n">registry</span> <span class="ow">or</span> <span class="n">RenderRegistry</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="texsmith.core.rules.RenderEngine.collect_from" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">collect_from</span>


<a href="#texsmith.core.rules.RenderEngine.collect_from" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">collect_from</span><span class="p">(</span><span class="n">owner</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Collect decorated callables from an object or module.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/rules.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">collect_from</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">owner</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Collect decorated callables from an object or module.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">attribute</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="n">owner</span><span class="p">):</span>
        <span class="n">handler</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">owner</span><span class="p">,</span> <span class="n">attribute</span><span class="p">)</span>
        <span class="n">definition</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="s2">&quot;__render_rule__&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">definition</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="s2">&quot;__func__&quot;</span><span class="p">):</span>
            <span class="n">definition</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">handler</span><span class="o">.</span><span class="vm">__func__</span><span class="p">,</span> <span class="s2">&quot;__render_rule__&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">definition</span><span class="p">,</span> <span class="n">RuleDefinition</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">definition</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">handler</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.rules.RenderEngine.register" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">register</span>


<a href="#texsmith.core.rules.RenderEngine.register" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">register</span><span class="p">(</span><span class="n">handler</span><span class="p">:</span> <span class="n">RuleCallable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Register a standalone callable decorated with <code>@renders</code>.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/rules.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">RuleCallable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register a standalone callable decorated with ``@renders``.&quot;&quot;&quot;</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="s2">&quot;__render_rule__&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">definition</span><span class="p">,</span> <span class="n">RuleDefinition</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;Handler must be decorated with @renders&quot;</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">definition</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">handler</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.rules.RenderEngine.run" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">run</span>


<a href="#texsmith.core.rules.RenderEngine.run" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">run</span><span class="p">(</span><span class="n">root</span><span class="p">:</span> <span class="n">Tag</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">RenderContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Execute all registered rules against the provided DOM root.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/rules.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">:</span> <span class="n">Tag</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">RenderContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Execute all registered rules against the provided DOM root.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">phase</span> <span class="ow">in</span> <span class="n">RenderPhase</span><span class="p">:</span>
        <span class="n">context</span><span class="o">.</span><span class="n">enter_phase</span><span class="p">(</span><span class="n">phase</span><span class="p">)</span>
        <span class="n">phase_rules</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">rules_for_phase</span><span class="p">(</span><span class="n">phase</span><span class="p">)</span>
        <span class="n">document_rules</span> <span class="o">=</span> <span class="n">phase_rules</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">DOCUMENT_NODE</span><span class="p">,</span> <span class="p">())</span>

        <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="n">document_rules</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_execute_rule</span><span class="p">(</span><span class="n">rule</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>

        <span class="n">visitor</span> <span class="o">=</span> <span class="n">_DOMVisitor</span><span class="p">(</span><span class="n">phase</span><span class="p">,</span> <span class="n">phase_rules</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
        <span class="n">visitor</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.rules.RenderPhase" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">RenderPhase</span>


<a href="#texsmith.core.rules.RenderPhase" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>



        <p>Ordered passes executed while mutating the parsed HTML tree.</p>
<p>The renderer performs multiple sweeps over the DOM instead of a single
monolithic traversal. Each phase isolates a category of mutations so that
earlier transformations stabilise before later ones begin. This drastically
reduces coupling between handlers and makes ordering guarantees explicit.</p>
<p>Phases progress from coarse structural edits to fine-grained formatting:</p>
<dl>
<dt><code>PRE</code></dt>
<dd>normalise the tree and discard unwanted nodes before any heavy lifting
  occurs.</dd>
<dt><code>BLOCK</code></dt>
<dd>build block-level <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> (paragraphs, lists, figures) once the structure is
  stable.</dd>
<dt><code>INLINE</code></dt>
<dd>apply inline formatting after blocks have established their final shape.</dd>
<dt><code>POST</code></dt>
<dd>run cleanup or bookkeeping steps that depend on previous phases, such as
  final numbering, synthetic nodes, or state aggregation.</dd>
</dl>











<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="texsmith.core.rules.RenderPhase.BLOCK" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">BLOCK</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#texsmith.core.rules.RenderPhase.BLOCK" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">BLOCK</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Block transformation pass: convert paragraphs, lists, figures, etc.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="texsmith.core.rules.RenderPhase.INLINE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">INLINE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#texsmith.core.rules.RenderPhase.INLINE" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">INLINE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Inline formatting pass: apply emphasis, links, inline math once blocks exist.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="texsmith.core.rules.RenderPhase.POST" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">POST</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#texsmith.core.rules.RenderPhase.POST" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">POST</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Finalisation pass: run cleanup that depends on earlier transformations.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="texsmith.core.rules.RenderPhase.PRE" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">PRE</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#texsmith.core.rules.RenderPhase.PRE" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">PRE</span> <span class="o">=</span> <span class="n">auto</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>DOM normalisation pass: strip/reshape nodes before structural work begins.</p>

    </div>

</div>






  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.rules.RenderRegistry" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">RenderRegistry</span>


<a href="#texsmith.core.rules.RenderRegistry" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">RenderRegistry</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Container used to gather render rules before execution.</p>








                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>src/texsmith/core/rules.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_rules</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="n">RenderPhase</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="n">RenderRule</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_rule_sources</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="texsmith.core.rules.RenderRegistry.describe" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">describe</span>


<a href="#texsmith.core.rules.RenderRegistry.describe" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">describe</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return a serialisable snapshot of the registered rules.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/rules.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">describe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return a serialisable snapshot of the registered rules.&quot;&quot;&quot;</span>
    <span class="n">entries</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">object</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">phase</span> <span class="ow">in</span> <span class="n">RenderPhase</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">tag</span><span class="p">,</span> <span class="n">rules</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rules_for_phase</span><span class="p">(</span><span class="n">phase</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
            <span class="k">for</span> <span class="n">order</span><span class="p">,</span> <span class="n">rule</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rules</span><span class="p">):</span>
                <span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;phase&quot;</span><span class="p">:</span> <span class="n">phase</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                        <span class="s2">&quot;tag&quot;</span><span class="p">:</span> <span class="n">tag</span><span class="p">,</span>
                        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">rule</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                        <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="n">rule</span><span class="o">.</span><span class="n">priority</span><span class="p">,</span>
                        <span class="s2">&quot;before&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">rule</span><span class="o">.</span><span class="n">before</span><span class="p">),</span>
                        <span class="s2">&quot;after&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">rule</span><span class="o">.</span><span class="n">after</span><span class="p">),</span>
                        <span class="s2">&quot;order&quot;</span><span class="p">:</span> <span class="n">order</span><span class="p">,</span>
                    <span class="p">}</span>
                <span class="p">)</span>
    <span class="k">return</span> <span class="n">entries</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.rules.RenderRegistry.iter_phase" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">iter_phase</span>


<a href="#texsmith.core.rules.RenderRegistry.iter_phase" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">iter_phase</span><span class="p">(</span><span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">RenderRule</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Iterate over rules for the provided phase.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/rules.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">iter_phase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">[</span><span class="n">RenderRule</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Iterate over rules for the provided phase.&quot;&quot;&quot;</span>
    <span class="n">buckets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rules</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">phase</span><span class="p">,</span> <span class="p">{})</span>
    <span class="k">for</span> <span class="n">tag_rules</span> <span class="ow">in</span> <span class="n">buckets</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">yield from</span> <span class="n">tag_rules</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.rules.RenderRegistry.register" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">register</span>


<a href="#texsmith.core.rules.RenderRegistry.register" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">register</span><span class="p">(</span><span class="n">rule</span><span class="p">:</span> <span class="n">RenderRule</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Register a rule for later execution.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/rules.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rule</span><span class="p">:</span> <span class="n">RenderRule</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register a rule for later execution.&quot;&quot;&quot;</span>
    <span class="n">phase_bucket</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rules</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">rule</span><span class="o">.</span><span class="n">phase</span><span class="p">,</span> <span class="p">{})</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_rule_sources</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">rule</span><span class="p">),</span> <span class="n">rule</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">rule</span><span class="o">.</span><span class="n">applies_to_document</span><span class="p">():</span>
        <span class="n">tag_bucket</span> <span class="o">=</span> <span class="n">phase_bucket</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">DOCUMENT_NODE</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">tag_bucket</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rule</span><span class="p">)</span>
        <span class="n">tag_bucket</span><span class="p">[:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sort_rules</span><span class="p">(</span><span class="n">tag_bucket</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">rule</span><span class="o">.</span><span class="n">tags</span><span class="p">:</span>
        <span class="n">tag_bucket</span> <span class="o">=</span> <span class="n">phase_bucket</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="p">[])</span>
        <span class="n">tag_bucket</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rule</span><span class="p">)</span>
        <span class="n">tag_bucket</span><span class="p">[:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_sort_rules</span><span class="p">(</span><span class="n">tag_bucket</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.core.rules.RenderRegistry.rules_for_phase" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">rules_for_phase</span>


<a href="#texsmith.core.rules.RenderRegistry.rules_for_phase" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">rules_for_phase</span><span class="p">(</span>
    <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">RenderRule</span><span class="p">,</span> <span class="o">...</span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return the rule mapping for the requested phase.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/rules.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">rules_for_phase</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">RenderRule</span><span class="p">,</span> <span class="o">...</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the rule mapping for the requested phase.&quot;&quot;&quot;</span>
    <span class="n">phase_bucket</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rules</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">phase</span><span class="p">,</span> <span class="p">{})</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">tag</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">rules</span><span class="p">)</span> <span class="k">for</span> <span class="n">tag</span><span class="p">,</span> <span class="n">rules</span> <span class="ow">in</span> <span class="n">phase_bucket</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.rules.RenderRule" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">RenderRule</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.rules.RenderRule" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">RenderRule</span><span class="p">(</span>
    <span class="n">priority</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
    <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span><span class="p">,</span>
    <span class="n">tags</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">handler</span><span class="p">:</span> <span class="n">RuleCallable</span><span class="p">,</span>
    <span class="n">auto_mark</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">nestable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">after_children</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">before</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="n">after</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Concrete rendering rule registered in the engine.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="texsmith.core.rules.RenderRule.applies_to_document" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">applies_to_document</span>


<a href="#texsmith.core.rules.RenderRule.applies_to_document" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">applies_to_document</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return True when the rule targets the synthetic document node.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/rules.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">applies_to_document</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return True when the rule targets the synthetic document node.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">==</span> <span class="p">(</span><span class="n">DOCUMENT_NODE</span><span class="p">,)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.rules.RuleDefinition" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">RuleDefinition</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.core.rules.RuleDefinition" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">RuleDefinition</span><span class="p">(</span>
    <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span><span class="p">,</span>
    <span class="n">tags</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">priority</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">auto_mark</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">nestable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">after_children</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">before</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="n">after</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Descriptor installed on handler callables by the decorator.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="texsmith.core.rules.RuleDefinition.bind" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">bind</span>


<a href="#texsmith.core.rules.RuleDefinition.bind" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">bind</span><span class="p">(</span><span class="n">handler</span><span class="p">:</span> <span class="n">RuleCallable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderRule</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create a concrete rule instance bound to the callable.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/rules.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">RuleCallable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderRule</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a concrete rule instance bound to the callable.&quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">or</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="s2">&quot;__name__&quot;</span><span class="p">,</span> <span class="n">handler</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">RenderRule</span><span class="p">(</span>
        <span class="n">phase</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">phase</span><span class="p">,</span>
        <span class="n">tags</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">tags</span><span class="p">,</span>
        <span class="n">priority</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">priority</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">handler</span><span class="o">=</span><span class="n">handler</span><span class="p">,</span>
        <span class="n">auto_mark</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">auto_mark</span><span class="p">,</span>
        <span class="n">nestable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">nestable</span><span class="p">,</span>
        <span class="n">after_children</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">after_children</span><span class="p">,</span>
        <span class="n">before</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">before</span><span class="p">,</span>
        <span class="n">after</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">after</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.core.rules.RuleFactory" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">RuleFactory</span>


<a href="#texsmith.core.rules.RuleFactory" class="headerlink" title="Permanent link">&para;</a></h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Protocol">Protocol</span></code></p>



        <p>Protocol implemented by rule decorators.</p>
<p>Decorators return lightweight factory objects instead of immediately
constructing :class:<code>RenderRule</code> instances. This indirection lets us bind
metadata once (at decoration time) while deferring handler resolution until
the registry collects rules. The factory pattern keeps the decorator API
ergonomic, avoids premature instantiation, and allows the same definition
to be rebound for different callables (e.g. class/static methods) without
duplicating registration logic.</p>











<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="texsmith.core.rules.RuleFactory.bind" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">bind</span>


<a href="#texsmith.core.rules.RuleFactory.bind" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">bind</span><span class="p">(</span><span class="n">handler</span><span class="p">:</span> <span class="n">RuleCallable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderRule</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Create a concrete render rule for the decorated handler.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/rules.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">bind</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">RuleCallable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RenderRule</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create a concrete render rule for the decorated handler.&quot;&quot;&quot;</span>
    <span class="o">...</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="texsmith.core.rules.renders" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">renders</span>


<a href="#texsmith.core.rules.renders" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">renders</span><span class="p">(</span>
    <span class="o">*</span><span class="n">tags</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span> <span class="o">=</span> <span class="n">RenderPhase</span><span class="o">.</span><span class="n">BLOCK</span><span class="p">,</span>
    <span class="n">priority</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">auto_mark</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">nestable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">after_children</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">before</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="n">after</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">RuleCallable</span><span class="p">],</span> <span class="n">RuleCallable</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Decorator used to register element handlers.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/core/rules.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">renders</span><span class="p">(</span>
    <span class="o">*</span><span class="n">tags</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">phase</span><span class="p">:</span> <span class="n">RenderPhase</span> <span class="o">=</span> <span class="n">RenderPhase</span><span class="o">.</span><span class="n">BLOCK</span><span class="p">,</span>
    <span class="n">priority</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">auto_mark</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">nestable</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">after_children</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">before</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="n">after</span><span class="p">:</span> <span class="n">Iterable</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">RuleCallable</span><span class="p">],</span> <span class="n">RuleCallable</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Decorator used to register element handlers.&quot;&quot;&quot;</span>
    <span class="n">selected_tags</span> <span class="o">=</span> <span class="n">tags</span> <span class="ow">or</span> <span class="p">(</span><span class="n">DOCUMENT_NODE</span><span class="p">,)</span>
    <span class="n">definition</span> <span class="o">=</span> <span class="n">RuleDefinition</span><span class="p">(</span>
        <span class="n">phase</span><span class="o">=</span><span class="n">phase</span><span class="p">,</span>
        <span class="n">tags</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">selected_tags</span><span class="p">),</span>
        <span class="n">priority</span><span class="o">=</span><span class="n">priority</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="n">auto_mark</span><span class="o">=</span><span class="n">auto_mark</span><span class="p">,</span>
        <span class="n">nestable</span><span class="o">=</span><span class="n">nestable</span><span class="p">,</span>
        <span class="n">after_children</span><span class="o">=</span><span class="n">after_children</span><span class="p">,</span>
        <span class="n">before</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">before</span><span class="p">),</span>
        <span class="n">after</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">after</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">decorator</span><span class="p">(</span><span class="n">handler</span><span class="p">:</span> <span class="n">RuleCallable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RuleCallable</span><span class="p">:</span>
        <span class="n">cast</span><span class="p">(</span><span class="n">Any</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span><span class="o">.</span><span class="n">__render_rule__</span> <span class="o">=</span> <span class="n">definition</span>
        <span class="k">return</span> <span class="n">handler</span>

    <span class="k">return</span> <span class="n">decorator</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="texsmith.adapters.latex.utils"></a>
    <div class="doc doc-contents first">

        <p>Utility helpers specific to <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> rendering.</p>










<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h2 id="texsmith.adapters.latex.utils.escape_latex_chars" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">escape_latex_chars</span>


<a href="#texsmith.adapters.latex.utils.escape_latex_chars" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">escape_latex_chars</span><span class="p">(</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">legacy_accents</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Escape <span aria-label="LaTeX" class="tex-logo tex-latex" data-tex-command="\LaTeX{}" data-tex-logo="latex" role="img" style="font-family: 'Times New Roman', serif;" title="Le systeme de composition base sur TeX">L<span style="position: relative; top: -0.3em; font-size: 0.8em;">A</span>T<span style="position: relative; top: 0.2em; font-size: 0.8em;">E</span>X</span> special characters leveraging pylatexenc.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/adapters/latex/utils.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">escape_latex_chars</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">legacy_accents</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Escape LaTeX special characters leveraging pylatexenc.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">text</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">text</span>
    <span class="n">parts</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">buffer</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_encode_chunk</span><span class="p">(</span><span class="n">chunk</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">escaped</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">_BASIC_LATEX_ESCAPE_MAP</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">char</span><span class="p">,</span> <span class="n">char</span><span class="p">)</span> <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">chunk</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">legacy_accents</span><span class="p">:</span>
            <span class="n">encoded</span> <span class="o">=</span> <span class="n">unicode_to_latex</span><span class="p">(</span><span class="n">escaped</span><span class="p">,</span> <span class="n">non_ascii_only</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">unknown_char_warning</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_wrap_latex_output</span><span class="p">(</span><span class="n">encoded</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">escaped</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_should_skip_encoding</span><span class="p">(</span><span class="n">char</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">unicodedata</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="s2">&quot;SUPERSCRIPT&quot;</span> <span class="ow">in</span> <span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;SUBSCRIPT&quot;</span> <span class="ow">in</span> <span class="n">name</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="s2">&quot;MODIFIER LETTER&quot;</span> <span class="ow">in</span> <span class="n">name</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;SMALL&quot;</span> <span class="ow">in</span> <span class="n">name</span> <span class="ow">or</span> <span class="s2">&quot;CAPITAL&quot;</span> <span class="ow">in</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">text</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">_should_skip_encoding</span><span class="p">(</span><span class="n">char</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">buffer</span><span class="p">:</span>
                <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_encode_chunk</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">buffer</span><span class="p">)))</span>
                <span class="n">buffer</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">buffer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">char</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">buffer</span><span class="p">:</span>
        <span class="n">parts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_encode_chunk</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">buffer</span><span class="p">)))</span>

    <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="texsmith.adapters.docker"></a>
    <div class="doc doc-contents first">

        <p>Abstractions for invoking Docker containers safely.</p>










<div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="texsmith.adapters.docker.DockerLimits" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">DockerLimits</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.adapters.docker.DockerLimits" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">DockerLimits</span><span class="p">(</span>
    <span class="n">cpus</span><span class="p">:</span> <span class="nb">float</span> <span class="o">|</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">memory</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">pids_limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Runtime constraints for Docker containers.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.adapters.docker.DockerRunRequest" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">DockerRunRequest</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.adapters.docker.DockerRunRequest" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">DockerRunRequest</span><span class="p">(</span>
    <span class="n">image</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(),</span>
    <span class="n">mounts</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">VolumeMount</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(),</span>
    <span class="n">environment</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(),</span>
    <span class="n">workdir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">user</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">use_host_user</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">remove</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">limits</span><span class="p">:</span> <span class="n">DockerLimits</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">network</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">extra_args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(),</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Full request payload for a Docker execution.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.adapters.docker.DockerRunner" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">DockerRunner</span>


<a href="#texsmith.adapters.docker.DockerRunner" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">DockerRunner</span><span class="p">(</span><span class="n">executable</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Utility class encapsulating Docker invocations.</p>








                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>src/texsmith/adapters/docker.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">executable</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_explicit_executable</span> <span class="o">=</span> <span class="n">executable</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cached_executable</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
                  </details>



<div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="texsmith.adapters.docker.DockerRunner.is_available" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">is_available</span>


<a href="#texsmith.adapters.docker.DockerRunner.is_available" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_available</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Return True when Docker can be located.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/adapters/docker.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_available</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return True when Docker can be located.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resolve_executable</span><span class="p">(</span><span class="n">optional</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="k">except</span> <span class="n">TransformerExecutionError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.adapters.docker.DockerRunner.reset" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">reset</span>


<a href="#texsmith.adapters.docker.DockerRunner.reset" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">reset</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Clear cached executable lookup results.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/adapters/docker.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Clear cached executable lookup results.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_cached_executable</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="texsmith.adapters.docker.DockerRunner.run" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">run</span>


<a href="#texsmith.adapters.docker.DockerRunner.run" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">run</span><span class="p">(</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">DockerRunRequest</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">capture_output</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CompletedProcess</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Execute Docker with the supplied request.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/adapters/docker.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">request</span><span class="p">:</span> <span class="n">DockerRunRequest</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">capture_output</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CompletedProcess</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Execute Docker with the supplied request.&quot;&quot;&quot;</span>
    <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_run_command</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
            <span class="n">command</span><span class="p">,</span>
            <span class="n">check</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">capture_output</span><span class="o">=</span><span class="n">capture_output</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cached_executable</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">raise</span> <span class="n">TransformerExecutionError</span><span class="p">(</span><span class="s2">&quot;Docker executable could not be located.&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>
    <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">TransformerExecutionError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to invoke Docker: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>

    <span class="k">if</span> <span class="n">result</span><span class="o">.</span><span class="n">returncode</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">stderr</span> <span class="o">=</span> <span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">stderr</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">stdout</span> <span class="o">=</span> <span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">stdout</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">detail</span> <span class="o">=</span> <span class="n">stderr</span> <span class="ow">or</span> <span class="n">stdout</span>
        <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Docker image &#39;</span><span class="si">{</span><span class="n">request</span><span class="o">.</span><span class="n">image</span><span class="si">}</span><span class="s2">&#39; failed with exit code </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">returncode</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">detail</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">message</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">detail</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">raise</span> <span class="n">TransformerExecutionError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="texsmith.adapters.docker.VolumeMount" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">VolumeMount</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

<a href="#texsmith.adapters.docker.VolumeMount" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">VolumeMount</span><span class="p">(</span>
    <span class="n">source</span><span class="p">:</span> <span class="n">Path</span> <span class="o">|</span> <span class="nb">str</span><span class="p">,</span> <span class="n">target</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">read_only</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Bind mount configuration.</p>











<div class="doc doc-children">












  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="texsmith.adapters.docker.is_docker_available" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">is_docker_available</span>


<a href="#texsmith.adapters.docker.is_docker_available" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">is_docker_available</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Check if Docker can be executed.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/adapters/docker.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_docker_available</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if Docker can be executed.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">_default_runner</span><span class="o">.</span><span class="n">is_available</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="texsmith.adapters.docker.run_container" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">run_container</span>


<a href="#texsmith.adapters.docker.run_container" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">run_container</span><span class="p">(</span>
    <span class="n">image</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">mounts</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">VolumeMount</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="n">environment</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">workdir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">user</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">use_host_user</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">limits</span><span class="p">:</span> <span class="n">DockerLimits</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">network</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">remove</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">extra_args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="n">capture_output</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CompletedProcess</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Execute Docker using the shared runner.</p>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>src/texsmith/adapters/docker.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_container</span><span class="p">(</span>
    <span class="n">image</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">mounts</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">VolumeMount</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="n">environment</span><span class="p">:</span> <span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">workdir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">user</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">use_host_user</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">limits</span><span class="p">:</span> <span class="n">DockerLimits</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">network</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">remove</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">extra_args</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(),</span>
    <span class="n">capture_output</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">text</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">CompletedProcess</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Execute Docker using the shared runner.&quot;&quot;&quot;</span>
    <span class="n">request</span> <span class="o">=</span> <span class="n">DockerRunRequest</span><span class="p">(</span>
        <span class="n">image</span><span class="o">=</span><span class="n">image</span><span class="p">,</span>
        <span class="n">args</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">args</span><span class="p">),</span>
        <span class="n">mounts</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">mounts</span><span class="p">),</span>
        <span class="n">environment</span><span class="o">=</span><span class="n">environment</span> <span class="ow">or</span> <span class="p">{},</span>
        <span class="n">workdir</span><span class="o">=</span><span class="n">workdir</span><span class="p">,</span>
        <span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span>
        <span class="n">use_host_user</span><span class="o">=</span><span class="n">use_host_user</span><span class="p">,</span>
        <span class="n">remove</span><span class="o">=</span><span class="n">remove</span><span class="p">,</span>
        <span class="n">limits</span><span class="o">=</span><span class="n">limits</span><span class="p">,</span>
        <span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">,</span>
        <span class="n">extra_args</span><span class="o">=</span><span class="nb">tuple</span><span class="p">(</span><span class="n">extra_args</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">_default_runner</span><span class="o">.</span><span class="n">run</span><span class="p">(</span>
        <span class="n">request</span><span class="p">,</span>
        <span class="n">capture_output</span><span class="o">=</span><span class="n">capture_output</span><span class="p">,</span>
        <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../cli/" class="md-footer__link md-footer__link--prev" aria-label="Previous: CLI">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                CLI
              </div>
            </div>
          </a>
        
        
          
          <a href="../custom-transformers/" class="md-footer__link md-footer__link--next" aria-label="Next: Custom Transformers">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Custom Transformers
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Yves Chevallier
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/yves-chevallier/texsmith" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["search", "navigation.instant", "navigation.tabs", "navigation.top", "navigation.indexes", "navigation.tracking", "navigation.expand", "navigation.sections", "navigation.footer", "navigation.path", "toc.follow", "content.code.copy", "content.code.annotate", "content.tabs.link", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../../js/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
      
        <script src="../../assets/drawio-viewer.js"></script>
      
        <script src="../../js/drawio-mkdocs.js"></script>
      
    
  </body>
</html>