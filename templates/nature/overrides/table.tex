\BLOCK{- set style = {
    'left': 'l',
    'right': 'r',
    'center': 'c',
    'justify': 'p'
} -}
\BLOCK{- set has_data = rows|length > 1 -}
\begin{table}[h]
\BLOCK{- if caption -}
\caption{\VAR{caption}}\BLOCK{- if label }\label{\VAR{label}}\BLOCK{- endif}
\BLOCK{- elif label -}
\label{\VAR{label}}
\BLOCK{- endif}
\BLOCK{- if is_large -}
\BLOCK{- if columns -}
\begin{tabular*}{\textwidth}{@{\extracolsep\fill}\BLOCK{- for column in columns -}\VAR{style.get(column, 'l')}\BLOCK{- endfor}}
\BLOCK{- else -}
\begin{tabular*}{\textwidth}{@{\extracolsep\fill}l}
\BLOCK{- endif -}
\BLOCK{- else -}
\BLOCK{- if columns -}
\begin{tabular}{@{}\BLOCK{- for column in columns -}\VAR{style.get(column, 'l')}\BLOCK{- endfor}@{}}
\BLOCK{- else -}
\begin{tabular}{@{}l@{}}
\BLOCK{- endif -}
\BLOCK{- endif}
\toprule
\BLOCK{for row in rows -}
\BLOCK{- if loop.first }
\BLOCK{- for col in row }
\VAR{col}\BLOCK{- if not loop.last} & \BLOCK{- else} \\
\BLOCK{- endif}
\BLOCK{- endfor}
\BLOCK{- if has_data }\midrule
\BLOCK{- endif}
\BLOCK{- else }
\BLOCK{- for col in row }
\VAR{col}\BLOCK{- if not loop.last} & \BLOCK{- else} \\
\BLOCK{- endif}
\BLOCK{- endfor}
\BLOCK{- endif}
\BLOCK{- endfor}
\botrule
\BLOCK{- if is_large -}
\end{tabular*}
\BLOCK{- else -}
\end{tabular}
\BLOCK{- endif}
\end{table}
