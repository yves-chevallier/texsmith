\ProvidesPackage{ts-callouts}[2025/11/21 TeXSmith Callouts (generated)]

\RequirePackage{xcolor}

\makeatletter
\@ifpackageloaded{tcolorbox}{}{%
  \RequirePackage{tcolorbox}%
}

\@ifundefined{tcbmany}{%
  \tcbuselibrary{many}%
}{}

\@ifundefined{tcbbreakable}{%
  \tcbuselibrary{breakable}%
}{}

\@ifundefined{tcbskins}{%
  \tcbuselibrary{skins}%
}{}

\makeatother

\newcommand{\texsmithCalloutStyleDefault}{\VAR{callout_style|default('fancy')}}
\providecommand{\texsmithCalloutStyle}{\texsmithCalloutStyleDefault}
\providecommand{\texsmithCalloutIcon}[1]{\texsmithEmoji{#1}}
\providecommand{\texsmithCalloutTitleFormat}[1]{\bfseries ~#1}

\BLOCK{ set style = callout_style | default("fancy") }
\BLOCK{ set callouts = callouts_definitions | default({}) }

\BLOCK{ for name, cfg in callouts.items() }
\definecolor{callout\VAR{name|capitalize}Bg}{HTML}{\VAR{cfg.get("background_color", "F0F0F0")}}
\definecolor{callout\VAR{name|capitalize}Frame}{HTML}{\VAR{cfg.get("border_color", "808080")}}
\definecolor{callout\VAR{name|capitalize}Title}{HTML}{\VAR{cfg.get("title_color", cfg.get("border_color", "808080"))}}
\BLOCK{ endfor }

\BLOCK{ if style == "classic" }
% Classic (monochrome) style
\tcbset{callout base/.style={
  breakable,
  enhanced,
  title filled=false,
  arc=0mm,
  boxrule=0mm,
  titlerule=0mm,
  lefttitle=0mm,
  leftupper=1mm,
  left=2mm,
  colback=white,
  colbacktitle=white,
  colframe=black!80,
  coltitle=black!80,
  parbox=false,
  frame hidden,
  borderline west={1mm}{0mm}{black!60},
}}
\BLOCK{ for name, cfg in callouts.items() }
\tcbset{callout \VAR{name}/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{\VAR{cfg.get("icon","ℹ")}}}}}}
\BLOCK{ endfor }
\newtcolorbox{callout}[2][]{%
  callout base,
  #1,
  after title={\texsmithCalloutTitleFormat{#2}}%
}
\BLOCK{ elif style == "minimal" }
% Minimal style (borders only, no icons). Prefix title with bold label.
\renewcommand{\texsmithCalloutTitleFormat}[1]{\noindent\MakeUppercase{#1}:~}
\tcbset{callout base/.style={
  breakable,
  enhanced,
  title filled=false,
  arc=0.4mm,
  boxrule=0.3mm,
  titlerule=0mm,
  lefttitle=0.2em,
  leftupper=1mm,
  colback=white,
  colframe=black,
  colbacktitle=white,
  coltitle=black,
  titlerule=0.2mm,
  parbox=false,
}}
\BLOCK{ for name, cfg in callouts.items() }
\tcbset{callout \VAR{name}/.style={callout base}}
\BLOCK{ endfor }
\newtcolorbox{callout}[2][]{%
  callout base,
  title={\bfseries #2},
  #1,
  after title={}%
}
\BLOCK{ else }
% Fancy style (colored, icons)
\renewcommand{\texsmithCalloutTitleFormat}[1]{\raisebox{0.2em}{\bfseries ~#1}}
\tcbset{callout base/.style={
  breakable,
  enhanced,
  arc=0.7mm,
  boxrule=0.1mm,
  titlerule=0mm,
  left=3mm,
  lefttitle=0.8mm,
  leftupper=1.5mm,
  coltitle=black,
  fonttitle=\bfseries\sffamily,
  parbox=false,
}}
\BLOCK{ for name, cfg in callouts.items() }
\tcbset{
  callout \VAR{name}/.style={
    callout base,
    colback=white,
    colframe=callout\VAR{name|capitalize}Frame,
    colbacktitle=callout\VAR{name|capitalize}Frame!5!white,
    coltitle=callout\VAR{name|capitalize}Title,
    borderline west={1.5mm}{0mm}{callout\VAR{name|capitalize}Frame},
    title={\makebox[1.6em][c]{\raisebox{0.05em}{\scalebox{1.1}{\texsmithCalloutIcon{\VAR{cfg.get("icon","ℹ")}}}}}},
  }
}
\BLOCK{ endfor }

\newtcolorbox{callout}[2][]{%
  callout base,
  #1,
  after title={\texsmithCalloutTitleFormat{#2}}%
}
\BLOCK{ endif }
