\ProvidesPackage{ts-code}[2025/11/21 TeXSmith Code listings (generated)]

\RequirePackage{xparse}

\newif\iftexsmithCodeLoaded
\texsmithCodeLoadedfalse

\ExplSyntaxOn
\cs_new_protected:Npn \texsmith_code_setup:nnnn #1#2#3#4
  {
    \iftexsmithCodeLoaded\else
      \texsmithCodeLoadedtrue
      \RequirePackage[many]{tcolorbox}
      \@ifpackageloaded{minted}{}{%
        \RequirePackage{minted}%
      }
      \tcbuselibrary{minted}
      \usemintedstyle{bw}
      \newtcblisting[auto counter,number within=section,
        list inside=mypyg]{texsmith@code}[4][]{%
        breakable,
        listing only,
        enhanced,
        colback=white,
        colframe=black!90,
        colbacktitle=white,
        coltitle=black,
        pad at break*=1mm,
        toptitle=0.15em,
        bottomtitle=0.1em,
        boxrule=0.07em,
        fonttitle=\bfseries,
        minted language=##2,
        top=1mm,
        arc=0.5mm,
        bottom=1mm,
        minted options={%
            tabsize=4,
            breaklines,
            xleftmargin=-0.75em,
            fontsize=\footnotesize,
            highlightcolor=gray!30,
            ignorelexererrors,
            ##4
          },
        before title={\hspace*{-0.9em}},
        title={##3},
        list entry={\protect\numberline{\thetcbcounter}##3},
        ##1
      }
      \RenewDocumentEnvironment{code}{O{} m m O{}}
        { \texsmith@code[##1]{##2}{##3}{##4} }
        {}
    \fi
    \texsmith@code[#1]{#2}{#3}{#4}
  }
\ExplSyntaxOff

\NewDocumentEnvironment{code}{O{} m m O{}}
  { \texsmith_code_setup:nnnn{#1}{#2}{#3}{#4} }
  {}
