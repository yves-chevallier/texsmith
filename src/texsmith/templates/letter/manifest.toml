[compat]
texsmith = ">=0.6,<1.0"

[latex.template]
name = "formal-letter"
version = "0.1.0"
entrypoint = "template/template.tex"
engine = "xelatex"
shell_escape = false
texlive_year = 2023
tlmgr_packages = [
    "babel",
    "fontspec",
    "microtype",
    "koma-script",
]
description = """
Formal letter template based on KOMA-Script with configurable
sender/recipient and standards."""

fragments = [
    "ts-fonts",
    "ts-extra",
    "ts-keystrokes",
    "ts-callouts",
    "ts-code",
    "ts-glossary",
    "ts-bibliography",
    "ts-todolist",
]

[latex.template.attributes.cursive]
default = false
type = "boolean"
sources = ["cursive"]
description = "Toggle cursive signature font."

[latex.template.attributes.language]
default = "en-UK"
type = "string"
allow_empty = false
sources = ["language"]
description = "Language for babel."

[latex.template.attributes.standard]
default = ""
type = "string"
sources = ["standard", "format"]
description = "Letter standard/format (e.g., sn, nf)."

[latex.template.attributes.date]
default = ""
type = "string"
escape = "latex"
allow_empty = true
sources = ["date"]

[latex.template.attributes.object]
default = ""
type = "string"
escape = "latex"
sources = ["object"]
description = "Subject line."

[latex.template.attributes.from_name]
default = ""
type = "string"
escape = "latex"
allow_empty = false
required = true
sources = ["from_name"]
description = "Sender full name."

[latex.template.attributes.from_address]
default = []
type = "list"
sources = ["from_address"]

[latex.template.attributes.back_address]
default = ""
type = "string"
escape = "latex"
sources = ["back_address"]

[latex.template.attributes.from_location]
default = ""
type = "string"
escape = "latex"
sources = ["from_location"]

[latex.template.attributes.to_name]
default = ""
type = "string"
escape = "latex"
allow_empty = false
required = true
sources = ["to_name"]
description = "Recipient full name."

[latex.template.attributes.to_address]
default = []
type = "list"
sources = ["to_address"]

[latex.template.attributes.closing]
default = ""
type = "string"
escape = "latex"
sources = ["closing"]
description = "Closing phrase."

[latex.template.attributes.opening]
default = ""
type = "string"
escape = "latex"
sources = ["opening"]
description = "Opening phrase."

[latex.template.attributes.signature]
default = ""
type = "any"
sources = ["signature"]
description = "Signature block (text or raw LaTeX)."

[latex.template.attributes.source_dir]
default = ""
type = "string"
allow_empty = true
sources = ["source_dir"]

[latex.template.attributes.output_dir]
default = ""
type = "string"
allow_empty = true
format = "raw"
sources = ["output_dir"]

[latex.template.attributes.signature_align]
default = "left"
type = "string"
sources = ["signature_align"]

[latex.template.attributes.reference]
default = ""
type = "string"
escape = "latex"
sources = ["reference"]
description = "Reference field content."

[latex.template.attributes.reference_fields]
default = false
type = "boolean"
sources = ["reference_fields"]
description = "Whether to render reference fields block."

[latex.template.attributes.postscript]
default = ""
type = "string"
escape = "latex"
sources = ["postscript"]
description = "Postscript paragraph."

[latex.template.attributes.fold_marks]
default = false
type = "boolean"
sources = ["fold_marks"]
description = "Toggle fold marks."

[latex.template.attributes.margin]
default = "default"
type = "string"
normaliser = "margin_style"
sources = ["margin"]
description = "Margin style (default, wide, narrow)."

[latex.template.attributes.preamble]
default = ""
type = "string"
allow_empty = true
sources = ["preamble"]

[latex.template.attributes.page_numbers]
default = false
type = "boolean"
sources = ["page_numbers"]
description = "Enable page numbers."

[latex.template.slots.mainmatter]
default = true
base_level = 10
strip_heading = true

[latex.template.slots.backmatter]
strip_heading = true

[latex.template.assets]
"fonts/modernline.otf" = { source = "fonts/modernline.otf" }
