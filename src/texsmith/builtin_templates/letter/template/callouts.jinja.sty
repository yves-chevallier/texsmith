% callouts.sty ‚Äî Callout boxes with tcolorbox + FontAwesome
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{callouts}[2025/10/27 Callout boxes with tcolorbox + FontAwesome]

% --- Required packages ---
\RequirePackage{xcolor}
\RequirePackage{tcolorbox}
\tcbuselibrary{breakable,skins}
\RequirePackage{fontawesome5}

% --- Shared color palette ---
\definecolor{calloutNoteBg}{HTML}{ECF3FF}
\definecolor{calloutNoteFrame}{HTML}{448AFF}
\definecolor{calloutAbstractBg}{HTML}{E5F7FF}
\definecolor{calloutAbstractFrame}{HTML}{00B0FF}
\definecolor{calloutInfoBg}{HTML}{E5F8FB}
\definecolor{calloutInfoFrame}{HTML}{00B8D4}
\definecolor{calloutTipBg}{HTML}{E5F8F6}
\definecolor{calloutTipFrame}{HTML}{00BFA5}
\definecolor{calloutSuccessBg}{HTML}{E5F9ED}
\definecolor{calloutSuccessFrame}{HTML}{00C853}
\definecolor{calloutQuestionBg}{HTML}{EFFCE7}
\definecolor{calloutQuestionFrame}{HTML}{64DD17}
\definecolor{calloutWarningBg}{HTML}{FFF1D6}
\definecolor{calloutWarningFrame}{HTML}{FFB200}
\definecolor{calloutCautionBg}{HTML}{FFF8E1}
\definecolor{calloutCautionFrame}{HTML}{FF9100}
\definecolor{calloutFailureBg}{HTML}{FFEDED}
\definecolor{calloutFailureFrame}{HTML}{FF5252}
\definecolor{calloutDangerBg}{HTML}{FFE2E7}
\definecolor{calloutDangerFrame}{HTML}{C62828}
\definecolor{calloutImportantBg}{HTML}{FFE0F0}
\definecolor{calloutImportantFrame}{HTML}{D81B60}
\definecolor{calloutBugBg}{HTML}{FEE5EE}
\definecolor{calloutBugFrame}{HTML}{F50057}
\definecolor{calloutExampleBg}{HTML}{F2EDFF}
\definecolor{calloutExampleFrame}{HTML}{7C4DFF}
\definecolor{calloutQuoteBg}{HTML}{F5F5F5}
\definecolor{calloutQuoteFrame}{HTML}{9E9E9E}
\definecolor{calloutExerciseBg}{HTML}{F5F5F5}
\definecolor{calloutExerciseFrame}{HTML}{202020}
\definecolor{calloutDefaultBg}{HTML}{F0F0F0}
\definecolor{calloutDefaultFrame}{HTML}{808080}

\BLOCK{ set style = callout_style | default("fancy") }

\BLOCK{ if style == "classic" }
% --- Classic (black & white) style ---
\newfontfamily\texsmithCalloutIconFont{Noto Emoji}[Renderer=Harfbuzz]
\newcommand{\texsmithCalloutIcon}[1]{%
  \ifdefined\texsmithCalloutIconFont
    {\texsmithCalloutIconFont #1}%
  \else
    #1%
  \fi
}
\tcbset{callout base/.style={
  breakable,
  enhanced,
  title filled=false,
  arc=0mm,
  boxrule=0mm,
  titlerule=0mm,
  lefttitle=0mm,
  leftupper=1mm,
  left=2mm,
  colback=white,
  colbacktitle=white,
  colframe=black!80,
  coltitle=black!80,
  parbox=false,
  frame hidden,
  borderline west={1mm}{0mm}{black!60},
}}
\tcbset{
  callout note/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{üìù}}}},
  callout abstract/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{üìÑ}}}},
  callout summary/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{üìã}}}},
  callout info/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{‚Ñπ}}}},
  callout tip/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{‚≠ê}}}},
  callout success/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{‚úÖ}}}},
  callout warning/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{‚ö†}}}},
  callout caution/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{‚ö†}}}},
  callout failure/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{‚ùó}}}},
  callout important/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{‚ùó}}}},
  callout hint/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{üí°}}}},
  callout danger/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{üî•}}}},
  callout bug/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{üêû}}}},
  callout example/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{üß™}}}},
  callout quote/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{‚ùù}}}},
  callout question/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{‚ùì}}}},
  callout solution/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{üí¨}}}},
  callout default/.style={callout base,title={\makebox[1.6em][c]{\texsmithCalloutIcon{‚Ñπ}}}},
}
\newcommand{\texsmithCalloutTitleFormat}[1]{~#1}
\newtcolorbox{callout}[2][]{%
  callout base,
  #1,
  after title={\texsmithCalloutTitleFormat{#2}}%
}

\BLOCK{ elif style == "minimal" }
% --- Minimal (bordered, no icons) style ---
\tcbset{callout base/.style={
  breakable,
  enhanced,
  title filled=false,
  arc=0.7mm,
  boxrule=0.3mm,
  titlerule=0mm,
  lefttitle=0mm,
  leftupper=1mm,
  colback=white,
  colframe=black,
  parbox=false,
}}
\tcbset{
  callout note/.style={callout base},
  callout abstract/.style={callout base},
  callout summary/.style={callout base},
  callout info/.style={callout base},
  callout tip/.style={callout base},
  callout success/.style={callout base},
  callout warning/.style={callout base},
  callout caution/.style={callout base},
  callout failure/.style={callout base},
  callout important/.style={callout base},
  callout hint/.style={callout base},
  callout danger/.style={callout base},
  callout bug/.style={callout base},
  callout example/.style={callout base},
  callout quote/.style={callout base},
  callout question/.style={callout base},
  callout solution/.style={callout base},
  callout default/.style={callout base},
}
\newtcolorbox{callout}[2][]{%
  callout base,
  before upper={\textbf{#2}\par\smallskip},
  #1,
}

\BLOCK{ else }
% --- Fancy (colored) style ---
\newcommand{\texsmithCalloutTitleFormat}[1]{~#1}
\tcbset{callout base/.style={
  breakable,
  enhanced,
  title filled,
  arc=0mm,
  boxrule=0mm,
  titlerule=0mm,
  lefttitle=1mm,
  leftupper=1mm,
  colback=white,
  parbox=false,
  frame hidden,
  borderline west={0.3mm}{0mm}{black!70},
}}
\tcbset{
  callout note/.style={
    colbacktitle=calloutNoteBg,
    colframe=calloutNoteFrame,
    coltitle=calloutNoteFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutNoteFrame},
    title={\makebox[1.3em][c]{\faBookmark}},
  },
  callout abstract/.style={
    colbacktitle=calloutAbstractBg,
    colframe=calloutAbstractFrame,
    coltitle=calloutAbstractFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutAbstractFrame},
    title={\makebox[1.3em][c]{\faLaptopCode}},
  },
  callout summary/.style={
    colbacktitle=calloutAbstractBg,
    colframe=calloutAbstractFrame,
    coltitle=calloutAbstractFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutAbstractFrame},
    title={\makebox[1.3em][c]{\faList}},
  },
  callout info/.style={
    colbacktitle=calloutInfoBg,
    colframe=calloutInfoFrame,
    coltitle=calloutInfoFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutInfoFrame},
    title={\makebox[1.3em][c]{\faComment}},
  },
  callout tip/.style={
    colbacktitle=calloutTipBg,
    colframe=calloutTipFrame,
    coltitle=calloutTipFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutTipFrame},
    title={\makebox[1.3em][c]{\faStar}},
  },
  callout success/.style={
    colbacktitle=calloutSuccessBg,
    colframe=calloutSuccessFrame,
    coltitle=calloutSuccessFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutSuccessFrame},
    title={\makebox[1.3em][c]{\faCheck}},
  },
  callout warning/.style={
    colbacktitle=calloutWarningBg,
    colframe=calloutWarningFrame,
    coltitle=calloutWarningFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutWarningFrame},
    title={\makebox[1.3em][c]{\faBolt}},
  },
  callout caution/.style={
    colbacktitle=calloutCautionBg,
    colframe=calloutCautionFrame,
    coltitle=calloutCautionFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutCautionFrame},
    title={\makebox[1.3em][c]{\faExclamationTriangle}},
  },
  callout failure/.style={
    colbacktitle=calloutFailureBg,
    colframe=calloutFailureFrame,
    coltitle=calloutFailureFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutFailureFrame},
    title={\makebox[1.3em][c]{\faExclamationTriangle}},
  },
  callout important/.style={
    colbacktitle=calloutImportantBg,
    colframe=calloutImportantFrame,
    coltitle=calloutImportantFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutImportantFrame},
    title={\makebox[1.3em][c]{\faExclamationTriangle}},
  },
  callout hint/.style={
    colbacktitle=calloutTipBg,
    colframe=calloutTipFrame,
    coltitle=calloutTipFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutTipFrame},
    title={\makebox[1.3em][c]{\faLightbulb}},
  },
  callout danger/.style={
    colbacktitle=calloutDangerBg,
    colframe=calloutDangerFrame,
    coltitle=calloutDangerFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutDangerFrame},
    title={\makebox[1.3em][c]{\faFire}},
  },
  callout bug/.style={
    colbacktitle=calloutBugBg,
    colframe=calloutBugFrame,
    coltitle=calloutBugFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutBugFrame},
    title={\makebox[1.3em][c]{\faBomb}},
  },
  callout example/.style={
    colbacktitle=calloutExampleBg,
    colframe=calloutExampleFrame,
    coltitle=calloutExampleFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutExampleFrame},
    title={\makebox[1.3em][c]{\faFlask}},
  },
  callout quote/.style={
    colbacktitle=calloutQuoteBg,
    colframe=calloutQuoteFrame,
    coltitle=calloutQuoteFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutQuoteFrame},
    title={\makebox[1.3em][c]{\faQuestionCircle}},
  },
  callout question/.style={
    colbacktitle=calloutQuestionBg,
    colframe=calloutQuestionFrame,
    coltitle=calloutQuestionFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutQuestionFrame},
    title={\makebox[1.3em][c]{\faQuestionCircle}},
  },
  callout solution/.style={
    colbacktitle=gray!40!white,
    title={\textcolor{black}{\makebox[1.3em][l]{\faComment}}},
  },
  callout default/.style={
    colbacktitle=calloutDefaultBg,
    colframe=calloutDefaultFrame,
    coltitle=calloutDefaultFrame!80!black,
    borderline west={0.3mm}{0mm}{calloutDefaultFrame},
    title={\textcolor{black}{\makebox[1.3em][l]{\faComment}}},
  },
}
\newtcolorbox{callout}[2][]{%
  callout base,
  #1,
  after title={\texsmithCalloutTitleFormat{#2}}%
}
\BLOCK{ endif }
